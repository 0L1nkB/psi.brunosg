<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCHS - Habilidades Sociais (Goldstein) | Bruno de Souza</title>
    

    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            /* Identidade Visual */
            --bg-color: #f0f8ff;
            --primary: #0984e3;       /* Azul */
            --secondary: #00b894;     /* Verde */
            --text: #2d3436;
            
            /* Botões de Frequência */
            --btn-1: #ff7675; /* Nunca */
            --btn-2: #fab1a0;
            --btn-3: #ffeaa7;
            --btn-4: #81ecec;
            --btn-5: #00cec9; /* Sempre */
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe6e9 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0; padding: 20px;
            color: var(--text);
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- CABEÇALHO --- */
        header {
            text-align: center; margin: 20px auto 40px auto;
            background: white; padding: 30px 20px;
            border-radius: 25px; border: 3px dashed var(--primary);
            box-shadow: 8px 8px 0 rgba(0,0,0,0.05);
            position: relative; max-width: 900px; width: 100%;
        }

        header h1 { font-size: 2rem; color: var(--primary); text-transform: uppercase; margin: 0; font-weight: 800; }
        .subtitle { margin-top: 5px; color: #636e72; font-weight: 600; }

        /* Botão Imprimir (Topo) */
        .btn-print-top {
            position: absolute; top: 20px; right: 20px;
            background: none; border: 2px solid var(--primary); color: var(--primary);
            padding: 8px 15px; border-radius: 20px;
            font-weight: 700; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; gap: 5px;
        }
        .btn-print-top:hover { background: var(--primary); color: white; }

        /* --- NAVEGAÇÃO DE ABAS --- */
        .tabs-container {
            display: flex; justify-content: center; flex-wrap: wrap; gap: 10px;
            margin-bottom: 30px; max-width: 900px;
        }

        .tab-btn {
            background: white; border: 2px solid #dfe6e9;
            padding: 10px 20px; border-radius: 30px;
            font-weight: 700; color: #b2bec3; cursor: pointer;
            transition: all 0.3s; font-family: 'Quicksand', sans-serif;
        }
        .tab-btn.active {
            background: var(--primary); color: white; border-color: var(--primary);
            box-shadow: 0 4px 10px rgba(9, 132, 227, 0.3);
        }

        /* --- ÁREA DE PERGUNTAS --- */
        .group-section { display: none; width: 100%; max-width: 900px; animation: fadeIn 0.4s ease; }
        .group-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .group-title {
            font-size: 1.5rem; font-weight: 800; color: var(--text);
            margin-bottom: 20px; border-left: 5px solid var(--secondary); padding-left: 15px;
        }

        .item-card {
            background: white; border-radius: 15px; padding: 20px;
            margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            border: 1px solid #f1f2f6; display: flex; flex-direction: column; gap: 15px;
            page-break-inside: avoid;
        }

        .item-text { font-size: 1.1rem; font-weight: 600; color: #2d3436; }

        /* BOTÕES DE RESPOSTA */
        .options-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }

        .option-label {
            padding: 10px 2px; border-radius: 10px; cursor: pointer;
            text-align: center; font-weight: 700; font-size: 0.9rem;
            transition: all 0.2s; border: 2px solid transparent;
            background: #f8f9fa; color: #636e72;
            display: flex; flex-direction: column; align-items: center;
        }

        .opt-val { font-size: 1.1rem; margin-bottom: 2px; }
        .opt-desc { font-size: 0.6rem; text-transform: uppercase; font-weight: 800; opacity: 0.7; }
        input[type="radio"] { display: none; }

        /* Classes de Seleção (JS Force) */
        .option-label.selected-1 { background: var(--btn-1); color: white; border-color: var(--btn-1); }
        .option-label.selected-2 { background: var(--btn-2); color: #2d3436; border-color: var(--btn-2); }
        .option-label.selected-3 { background: var(--btn-3); color: #2d3436; border-color: #f1c40f; }
        .option-label.selected-4 { background: var(--btn-4); color: #2d3436; border-color: var(--btn-4); }
        .option-label.selected-5 { background: var(--btn-5); color: white; border-color: var(--btn-5); }

        /* --- RESULTADOS --- */
        #results-area {
            display: none; width: 100%; max-width: 900px;
            background: white; padding: 30px; border-radius: 20px;
            border: 3px dashed var(--primary); margin-top: 40px;
        }

        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }

        .res-card {
            background: #f8f9fa; padding: 15px; border-radius: 12px;
            border-left: 5px solid #ccc; page-break-inside: avoid;
        }
        .res-title { font-size: 0.9rem; font-weight: 700; text-transform: uppercase; color: #b2bec3; }
        .res-score { font-size: 1.5rem; font-weight: 800; color: var(--text); }
        .res-status { font-size: 0.8rem; font-weight: 700; margin-top: 5px; }
        .status-low { color: #d63031; } 
        .status-ok { color: #00b894; }

        .btn-calc {
            display: block; width: 100%; max-width: 400px; margin: 40px auto;
            padding: 15px; background: var(--text); color: white;
            border: none; border-radius: 50px; font-size: 1.2rem; font-weight: 800;
            cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: 0.2s;
        }
        .btn-calc:hover { transform: translateY(-3px); }

        .btn-back { display: block; margin: 30px auto; text-align: center; color: #b2bec3; text-decoration: none; font-weight: 600; }
        .btn-back:hover { color: var(--primary); }

        /* --- IMPRESSÃO --- */
        @media print {
            body { background: white; color: black; display: block; padding: 0; }
            .tabs-container, .btn-print-top, .btn-calc, .btn-back { display: none !important; }
            header { border: none; box-shadow: none; margin-bottom: 20px; }
            #results-area { display: block !important; border: 2px solid #000; margin-top: 0; }
            #lchsForm { display: none; } /* Esconde perguntas para focar no relatório */
            .res-card { border: 1px solid #ccc; background: #fff; color: black; }
            * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }

        @media (max-width: 600px) {
            .options-row { gap: 3px; }
            .option-label { padding: 10px 0; }
            .opt-desc { font-size: 0.5rem; }
            .btn-print-top span { display: none; }
        }
    </style>
</head>
<body>

    <header data-aos="fade-down">
        <button class="btn-print-top" onclick="window.print()">
            <i class="fa-solid fa-print"></i> <span>Imprimir Relatório</span>
        </button>
        
        <h1>LCHS</h1>
        <div class="subtitle">Lista de Checagem de Habilidades Sociais (Goldstein)</div>
    </header>

    <div class="tabs-container" id="tabs">
        <button class="tab-btn active" onclick="showGroup(0)">1. Iniciais</button>
        <button class="tab-btn" onclick="showGroup(1)">2. Avançadas</button>
        <button class="tab-btn" onclick="showGroup(2)">3. Sentimentos</button>
        <button class="tab-btn" onclick="showGroup(3)">4. Agressão</button>
        <button class="tab-btn" onclick="showGroup(4)">5. Estresse</button>
        <button class="tab-btn" onclick="showGroup(5)">6. Planejamento</button>
    </div>

    <div class="instruction-box" style="text-align:center; margin-bottom:20px; color:#636e72;">
        Avalie a frequência com que você utiliza cada habilidade: <strong>1 (Nunca)</strong> a <strong>5 (Sempre)</strong>.
    </div>

    <form id="lchsForm">
        <div id="quiz-container"></div>
    </form>

    <button type="button" class="btn-calc" onclick="calculateResults()">
        <i class="fa-solid fa-clipboard-check"></i> CALCULAR DÉFICITS
    </button>

    <div id="results-area">
        <h3 style="text-align:center; color:var(--text); margin-bottom:20px;">ANÁLISE DE DÉFICITS (RELATÓRIO)</h3>
        <p style="text-align:center; font-size:0.9rem; color:#636e72; margin-bottom:20px;">
            Escores médios por grupo de habilidade (1 a 5).
        </p>
        <div class="result-grid" id="res-grid"></div>
        
        <button type="button" class="btn-calc" style="background:#2d3436; margin-top:30px; font-size:1rem;" onclick="window.print()">
            <i class="fa-solid fa-print"></i> Salvar Relatório em PDF
        </button>
    </div>

    <center>
        <a href="../listaferramentas.html" class="btn-back"><i class="fa-solid fa-arrow-left"></i> Voltar para Ferramentas</a>
    </center>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        /* ESTRUTURA GOLDSTEIN */
        const groups = [
            { id: "G1", name: "Habilidades Iniciais", color: "#6c5ce7", items: ["1. Prestar atenção (ouvir)", "2. Começar uma conversa", "3. Manter uma conversa", "4. Fazer uma pergunta", "5. Agradecer", "6. Apresentar-se", "7. Apresentar outras pessoas", "8. Elogiar"] },
            { id: "G2", name: "Habilidades Avançadas", color: "#0984e3", items: ["9. Pedir ajuda", "10. Participar", "11. Dar instruções", "12. Seguir instruções", "13. Desculpar-se", "14. Convencer os outros"] },
            { id: "G3", name: "Lidar com Sentimentos", color: "#00b894", items: ["15. Conhecer os próprios sentimentos", "16. Expressar seus sentimentos", "17. Compreender os sentimentos dos outros", "18. Enfrentar a raiva de outra pessoa", "19. Expressar afeto", "20. Lidar com o medo", "21. Recompensar a si mesmo"] },
            { id: "G4", name: "Alternativas à Agressão", color: "#e17055", items: ["22. Pedir permissão", "23. Compartilhar algo", "24. Ajudar os outros", "25. Negociar", "26. Empregar o autocontrole", "27. Defender seus direitos", "28. Responder a brincadeiras", "29. Evitar problemas com os outros", "30. Não entrar em brigas"] },
            { id: "G5", name: "Lidar com o Estresse", color: "#fdcb6e", items: ["31. Fazer uma reclamação", "32. Responder a uma reclamação", "33. Demonstrar esportividade (saber perder)", "34. Lidar com o embaraço (vergonha)", "35. Lidar com o fato de ser deixado de lado", "36. Defender um amigo", "37. Responder à persuasão", "38. Responder ao fracasso", "39. Enfrentar mensagens contraditórias", "40. Enfrentar uma acusação", "41. Preparar-se para uma conversa difícil", "42. Lidar com a pressão do grupo"] },
            { id: "G6", name: "Planejamento", color: "#a29bfe", items: ["43. Tomar iniciativas", "44. Discernir sobre a causa de um problema", "45. Estabelecer um objetivo", "46. Determinar as próprias habilidades", "47. Recolher informações", "48. Resolver problemas segundo a importância", "49. Tomar uma decisão", "50. Concentrar-se numa tarefa"] }
        ];

        const container = document.getElementById('quiz-container');
        let globalItemIndex = 0;

        // Renderizar Grupos
        groups.forEach((group, gIndex) => {
            const groupDiv = document.createElement('div');
            groupDiv.className = `group-section ${gIndex === 0 ? 'active' : ''}`;
            groupDiv.id = `group-${gIndex}`;
            
            let html = `<div class="group-title" style="border-color:${group.color}; color:${group.color}">${group.name}</div>`;
            
            group.items.forEach((itemText) => {
                globalItemIndex++;
                html += `
                    <div class="item-card">
                        <div class="item-text">${itemText}</div>
                        <div class="options-row" id="row-${globalItemIndex}">
                            ${generateOption(globalItemIndex, 1, "Nunca", gIndex)}
                            ${generateOption(globalItemIndex, 2, "Raro", gIndex)}
                            ${generateOption(globalItemIndex, 3, "Às Vezes", gIndex)}
                            ${generateOption(globalItemIndex, 4, "Freq.", gIndex)}
                            ${generateOption(globalItemIndex, 5, "Sempre", gIndex)}
                        </div>
                    </div>
                `;
            });
            
            groupDiv.innerHTML = html;
            container.appendChild(groupDiv);
        });

        function generateOption(qIdx, val, desc, gIdx) {
            return `
                <label class="option-label" onclick="selectOption(this, ${qIdx}, ${val})">
                    <input type="radio" name="q${qIdx}" value="${val}" data-group="${gIdx}">
                    <span class="opt-val">${val}</span><span class="opt-desc">${desc}</span>
                </label>
            `;
        }

        // Função para feedback visual manual (Funciona em todos navegadores)
        function selectOption(label, qIdx, val) {
            // Remove classe selecionada de todos no mesmo grupo
            const row = document.getElementById(`row-${qIdx}`);
            const labels = row.querySelectorAll('.option-label');
            labels.forEach(l => l.className = 'option-label'); // Reseta

            // Adiciona classe específica para cor
            label.classList.add(`selected-${val}`);
        }

        function showGroup(index) {
            document.querySelectorAll('.tab-btn').forEach((btn, i) => {
                if(i === index) btn.classList.add('active');
                else btn.classList.remove('active');
            });
            document.querySelectorAll('.group-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(`group-${index}`).classList.add('active');
            window.scrollTo(0,0);
        }

        function calculateResults() {
            let groupScores = [0,0,0,0,0,0];
            let groupCounts = [0,0,0,0,0,0]; // Conta quantos itens tem no grupo (fixo)
            let answersPerGroup = [0,0,0,0,0,0]; // Conta quantos o usuário respondeu

            const inputs = document.querySelectorAll('input[type="radio"]:checked');
            let totalAnswered = 0;
            
            inputs.forEach(inp => {
                const gIdx = parseInt(inp.getAttribute('data-group'));
                const val = parseInt(inp.value);
                groupScores[gIdx] += val;
                answersPerGroup[gIdx]++;
                totalAnswered++;
            });

            if(totalAnswered === 0) {
                alert("Por favor, responda aos itens antes de calcular.");
                return;
            }

            if(totalAnswered < 50) {
                 if(!confirm(`Você respondeu apenas ${totalAnswered} de 50 itens. O cálculo pode ficar impreciso. Deseja continuar?`)) return;
            }

            const grid = document.getElementById('res-grid');
            grid.innerHTML = '';

            groups.forEach((g, idx) => {
                const score = groupScores[idx];
                const totalItems = g.items.length;
                // Calcula média baseada no número total de itens do grupo (para penalizar não-resposta) 
                // OU baseada no que foi respondido? Geralmente em clínica usa-se o que foi respondido ou se exige tudo.
                // Vou usar o total de itens do grupo para manter a escala 1-5 real.
                
                const avg = totalItems > 0 ? (score / totalItems).toFixed(1) : 0;
                
                let status = "Bom Repertório";
                let statusClass = "status-ok";
                let barColor = "#00b894";

                if(avg < 3.5) { status = "Médio"; statusClass = ""; barColor="#fdcb6e"; }
                if(avg < 2.5) { status = "Déficit Significativo"; statusClass = "status-low"; barColor="#ff7675"; }

                grid.innerHTML += `
                    <div class="res-card" style="border-left-color:${g.color}">
                        <div class="res-title">${g.name}</div>
                        <div class="res-score">${avg} <span style="font-size:0.8rem; color:#888;">/5.0</span></div>
                        <div class="res-status ${statusClass}">${status}</div>
                        <div style="width:100%; height:6px; background:#eee; margin-top:10px; border-radius:3px;">
                            <div style="height:100%; background:${barColor}; width:${(avg/5)*100}%"></div>
                        </div>
                    </div>
                `;
            });

            const resArea = document.getElementById('results-area');
            resArea.style.display = 'block';
            resArea.scrollIntoView({ behavior: 'smooth' });
        }
    </script>

</body>
</html>
