<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASRS-18 | Bruno de Souza</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            /* Tema TDAH (Laranja/Energia) */
            --bg-color: #f0f8ff;
            --primary: #e67e22;      
            --primary-dark: #d35400;
            --accent: #f1c40f;
            --text: #2d3436;
            --card-border: #b2bec3;
            --option-bg: #f1f2f6;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe6e9 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- CABEÇALHO --- */
        header {
            text-align: center;
            margin: 20px auto 40px auto;
            background: white;
            padding: 30px 20px;
            border-radius: 25px;
            border: 3px dashed var(--primary);
            box-shadow: 8px 8px 0 rgba(0,0,0,0.05);
            position: relative;
            max-width: 800px;
            width: 100%;
        }

        header::before {
            content: ""; 
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%) rotate(-1deg);
            width: 140px; height: 35px; 
            background-color: rgba(230, 126, 34, 0.2); 
            border: 1px solid rgba(0,0,0,0.05); 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2rem;
            color: var(--primary-dark);
            text-transform: uppercase;
            margin: 0;
            font-weight: 800;
        }

        .subtitle { margin-top: 5px; color: #636e72; font-weight: 600; }

        /* --- CONTAINER --- */
        .main-container {
            max-width: 850px;
            width: 100%;
            margin-bottom: 80px;
        }

        /* Títulos das Seções (Parte A / B) */
        .section-header {
            background: #fff3e0;
            color: var(--primary-dark);
            padding: 15px 20px;
            border-radius: 15px;
            font-weight: 800;
            margin: 30px 0 20px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            border-left: 5px solid var(--primary);
        }

        /* --- CARTÃO DE PERGUNTA --- */
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.05);
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 15px;
        }

        /* --- OPÇÕES DE RESPOSTA (Botões Coloridos) --- */
        .options-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
        }

        .option-label {
            background: var(--option-bg);
            padding: 12px 5px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: #636e72;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        /* Cores progressivas ao passar o mouse ou selecionar */
        /* 0 e 1: Verde (Baixo risco) */
        .option-label[data-val="0"]:hover, .option-label:has(input[value="0"]:checked) {
            background: #dff9fb; border-color: #badc58; color: #6ab04c;
        }
        .option-label[data-val="1"]:hover, .option-label:has(input[value="1"]:checked) {
            background: #dff9fb; border-color: #badc58; color: #6ab04c;
        }
        /* 2: Amarelo (Atenção) */
        .option-label[data-val="2"]:hover, .option-label:has(input[value="2"]:checked) {
            background: #fffce0; border-color: #f1c40f; color: #f39c12;
        }
        /* 3 e 4: Laranja/Vermelho (Alto risco) */
        .option-label[data-val="3"]:hover, .option-label:has(input[value="3"]:checked) {
            background: #ffeaa7; border-color: #e67e22; color: #d35400;
        }
        .option-label[data-val="4"]:hover, .option-label:has(input[value="4"]:checked) {
            background: #ffcccc; border-color: #e74c3c; color: #c0392b;
        }

        .option-label:has(input:checked) {
            transform: scale(1.05);
            font-weight: 800;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        input[type="radio"] { display: none; }

        /* --- BOTÃO CALCULAR --- */
        .btn-calc {
            display: block;
            width: 100%;
            padding: 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(230, 126, 34, 0.3);
            margin-top: 30px;
            transition: 0.3s;
        }
        .btn-calc:hover { transform: translateY(-3px); background: var(--primary-dark); }

        /* --- RESULTADOS --- */
        #results-area {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 25px;
            border: 3px dashed var(--primary);
            margin-top: 40px;
            text-align: center;
        }

        .score-box {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .score-item {
            background: #fff3e0;
            padding: 20px;
            border-radius: 15px;
            flex: 1;
            min-width: 150px;
        }

        .score-val {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-dark);
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
        }

        /* Botão Voltar */
        .btn-back {
            display: inline-block; margin-top: 20px; color: #b2bec3; text-decoration: none; font-weight: 600;
        }
        .btn-back:hover { color: var(--primary); }

        @media (max-width: 600px) {
            .options-group { grid-template-columns: 1fr 1fr; } 
            /* Em celular, opções 2 colunas para ficar botões maiores */
        }
    </style>
</head>
<body>

    <header data-aos="fade-down">
        <h1>ASRS-18</h1>
        <div class="subtitle">Escala de TDAH Adulto</div>
    </header>

    <div class="main-container">
        
        <div class="section-header" data-aos="fade-right">
            <i class="fa-solid fa-brain"></i> PARTE A: Desatenção
        </div>
        <div id="part-a-container"></div>

        <div class="section-header" data-aos="fade-right">
            <i class="fa-solid fa-bolt"></i> PARTE B: Hiperatividade
        </div>
        <div id="part-b-container"></div>

        <button class="btn-calc" onclick="calcularResultados()">
            <i class="fa-solid fa-chart-pie"></i> CALCULAR RESULTADO
        </button>

        <div id="results-area">
            <h2 style="color: var(--primary-dark); margin-bottom: 20px;">Análise da Triagem</h2>
            
            <div class="score-box">
                <div class="score-item">
                    <div class="score-val" id="score-inattention">-</div>
                    <div>Desatenção</div>
                </div>
                <div class="score-item">
                    <div class="score-val" id="score-hyperactivity">-</div>
                    <div>Hiperatividade</div>
                </div>
            </div>

            <div class="chart-wrapper">
                <canvas id="asrsChart"></canvas>
            </div>

            <p style="margin-top: 20px; color: #7f8c8d; font-size: 0.9rem;">
                *Este teste é apenas uma triagem e não substitui o diagnóstico profissional.
                Resultados acima de 5 indicam alta probabilidade.
            </p>

            <button class="btn-calc" style="background:#2d3436; margin-top:20px; font-size:1rem;" onclick="window.print()">
                <i class="fa-solid fa-print"></i> Salvar PDF
            </button>
        </div>

        <center>
            <a href="../listaferramentas.html" class="btn-back"><i class="fa-solid fa-arrow-left"></i> Voltar para Ferramentas</a>
        </center>

    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        const partA = [
            "1. Comete erros por falta de atenção em projetos chatos ou difíceis?",
            "2. Tem dificuldade para manter a atenção em trabalhos repetitivos?",
            "3. Tem dificuldade para se concentrar no que as pessoas dizem?",
            "4. Deixa projetos pela metade depois de fazer as partes difíceis?",
            "5. Tem dificuldade para fazer trabalhos que exigem organização?",
            "6. Evita ou adia tarefas que exigem muita concentração?",
            "7. Perde coisas ou tem dificuldade de encontrá-las?",
            "8. Se distrai com atividades ou barulhos à sua volta?",
            "9. Tem dificuldade para lembrar de compromissos?"
        ];

        const partB = [
            "10. Fica se mexendo na cadeira ou balançando mãos/pés?",
            "11. Levanta-se da cadeira em reuniões ou onde deveria ficar sentado?",
            "12. Sente-se inquieto(a) ou agitado(a)?",
            "13. Tem dificuldade para sossegar e relaxar no tempo livre?",
            "14. Sente-se 'com o motor ligado' e precisando fazer coisas?",
            "15. Fala demais em situações sociais?",
            "16. Termina as frases das pessoas antes delas?",
            "17. Tem dificuldade para esperar sua vez?",
            "18. Interrompe os outros quando estão ocupados?"
        ];

        const options = [
            {val: 0, text: "Nunca"},
            {val: 1, text: "Raramente"},
            {val: 2, text: "Às vezes"},
            {val: 3, text: "Frequente"},
            {val: 4, text: "Mto Frequente"}
        ];

        // Lógica de Corte (Thresholds)
        const thresholdA = [2, 2, 2, 3, 3, 3, 3, 3, 2];
        const thresholdB = [2, 2, 2, 2, 2, 3, 2, 3, 2];

        function renderQuestions(questions, containerId, prefix) {
            const container = document.getElementById(containerId);
            questions.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.setAttribute('data-aos', 'fade-up');

                let optsHTML = '';
                options.forEach(opt => {
                    optsHTML += `
                        <label class="option-label" data-val="${opt.val}">
                            <input type="radio" name="q${prefix}${idx}" value="${opt.val}">
                            ${opt.text}
                        </label>
                    `;
                });

                card.innerHTML = `
                    <div class="question-text">${q}</div>
                    <div class="options-group">${optsHTML}</div>
                `;
                container.appendChild(card);
            });
        }

        renderQuestions(partA, 'part-a-container', 'A');
        renderQuestions(partB, 'part-b-container', 'B');

        let myChart = null;

        function calcularResultados() {
            let scoreA = 0;
            let scoreB = 0;

            // Parte A
            for(let i=0; i<9; i++) {
                const r = document.querySelector(`input[name="qA${i}"]:checked`);
                if(r && parseInt(r.value) >= thresholdA[i]) scoreA++;
            }

            // Parte B
            for(let i=0; i<9; i++) {
                const r = document.querySelector(`input[name="qB${i}"]:checked`);
                if(r && parseInt(r.value) >= thresholdB[i]) scoreB++;
            }

            // Exibir
            document.getElementById('score-inattention').innerText = scoreA + "/9";
            document.getElementById('score-hyperactivity').innerText = scoreB + "/9";

            document.getElementById('results-area').style.display = 'block';

            // Gráfico
            const ctx = document.getElementById('asrsChart').getContext('2d');
            if(myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Desatenção', 'Hiperatividade'],
                    datasets: [{
                        label: 'Sintomas Relevantes',
                        data: [scoreA, scoreB],
                        backgroundColor: ['#3498db', '#e67e22'],
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 9 } },
                    plugins: { legend: { display: false } }
                }
            });

            setTimeout(() => {
                document.getElementById('results-area').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }
    </script>
</body>
</html>
