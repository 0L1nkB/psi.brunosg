<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPQ - Questionário Borderline | Bruno de Souza</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            /* Identidade Visual */
            --bg-color: #f0f8ff;
            --primary: #6c5ce7;       /* Roxo (Tema BPQ) */
            --primary-dark: #5b4cc4;
            --accent: #fdcb6e;        /* Amarelo */
            --text: #2d3436;
            --card-border: #b2bec3;
            
            /* Cores dos Botões */
            --true-bg: #00b894;       /* Verde */
            --false-bg: #ff7675;      /* Vermelho Suave */
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe6e9 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- CABEÇALHO (Estilo Fita Adesiva) --- */
        header {
            text-align: center;
            margin: 20px auto 40px auto;
            background: white;
            padding: 30px 20px;
            border-radius: 25px;
            border: 3px dashed var(--primary);
            box-shadow: 8px 8px 0 rgba(0,0,0,0.05);
            position: relative;
            max-width: 800px;
            width: 100%;
        }

        header::before {
            content: ""; 
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%) rotate(-1deg);
            width: 140px; height: 35px; 
            background-color: rgba(108, 92, 231, 0.2); 
            border: 1px solid rgba(0,0,0,0.05); 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.2rem;
            color: var(--primary);
            text-transform: uppercase;
            margin: 0;
            font-weight: 800;
        }

        .subtitle { margin-top: 5px; color: #636e72; font-weight: 600; }

        .instruction-box {
            background: #fffce0;
            border: 2px dashed var(--accent);
            padding: 15px 20px;
            border-radius: 15px;
            color: #555;
            font-size: 0.95rem;
            margin-bottom: 30px;
            display: inline-block;
        }

        /* --- CONTAINER --- */
        .main-container {
            max-width: 900px;
            width: 100%;
            margin-bottom: 80px;
        }

        /* --- LISTA DE QUESTÕES --- */
        .question-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .q-row {
            background: white;
            border: 2px dashed var(--card-border);
            border-radius: 15px;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            transition: all 0.2s ease;
        }

        .q-row:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transform: translateX(5px);
        }

        .q-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .q-num {
            font-weight: 800;
            color: var(--primary);
            font-size: 1rem;
            min-width: 25px;
        }

        .q-text {
            font-size: 1rem;
            font-weight: 600;
            line-height: 1.4;
            color: #2d3436;
        }

        /* --- BOTÕES V/F --- */
        .btn-group {
            display: flex;
            gap: 10px;
            min-width: 100px;
            justify-content: flex-end;
        }

        .q-btn {
            width: 45px; height: 45px;
            border-radius: 12px;
            border: 2px solid #dfe6e9;
            background: #f8f9fa;
            color: #b2bec3;
            font-weight: 800;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Estados Hover e Active */
        .q-btn:hover { transform: translateY(-2px); }

        .q-btn.true-btn:hover { border-color: var(--true-bg); color: var(--true-bg); }
        .q-btn.false-btn:hover { border-color: var(--false-bg); color: var(--false-bg); }

        /* Selecionado */
        .q-btn.selected.true-btn {
            background: var(--true-bg);
            border-color: var(--true-bg);
            color: white;
            box-shadow: 0 4px 10px rgba(0, 184, 148, 0.3);
        }

        .q-btn.selected.false-btn {
            background: var(--false-bg);
            border-color: var(--false-bg);
            color: white;
            box-shadow: 0 4px 10px rgba(255, 118, 117, 0.3);
        }

        /* --- BOTÃO CALCULAR --- */
        .btn-calc {
            display: block; width: 100%;
            margin-top: 40px; padding: 18px;
            background: var(--primary); color: white;
            border: none; border-radius: 50px;
            font-size: 1.2rem; font-weight: 800; font-family: 'Quicksand', sans-serif;
            cursor: pointer; box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3);
            transition: transform 0.2s;
        }
        .btn-calc:hover { transform: translateY(-3px); background: var(--primary-dark); }

        /* --- RESULTADOS --- */
        .results-section {
            display: none;
            margin-top: 50px;
            background: white;
            border-radius: 25px;
            padding: 40px;
            border: 3px dashed var(--primary);
            text-align: center;
        }

        .total-score-box {
            background: var(--primary);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.3);
        }

        .score-val { font-size: 3.5rem; font-weight: 800; line-height: 1; margin: 10px 0; }
        .score-class {
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 700;
            display: inline-block;
        }

        /* Grid de Subescalas */
        .subs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            text-align: left;
        }

        .sub-card {
            background: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sub-name { font-weight: 700; color: #636e72; font-size: 0.95rem; }
        .sub-val { font-weight: 800; color: var(--primary); font-size: 1.2rem; }
        .sub-max { font-size: 0.8rem; color: #b2bec3; font-weight: 600; }

        /* Botão Voltar */
        .btn-back {
            display: block; margin-top: 30px; text-align: center; color: #b2bec3; text-decoration: none; font-weight: 600;
        }
        .btn-back:hover { color: var(--primary); }

        @media (max-width: 600px) {
            .q-row { flex-direction: column; align-items: flex-start; gap: 10px; }
            .btn-group { width: 100%; justify-content: space-between; }
            .q-btn { width: 48%; }
            .total-score-box { padding: 20px; }
            .score-val { font-size: 2.5rem; }
        }
        
        @media print {
            .btn-calc, .btn-back, header::before { display: none; }
            .container, .results-section { border: 1px solid #ccc; box-shadow: none; }
            .q-row { border: 1px solid #eee; break-inside: avoid; }
        }
    </style>
</head>
<body>

    <header data-aos="fade-down">
        <h1>BPQ</h1>
        <div class="subtitle">Borderline Personality Questionnaire</div>
    </header>

    <div class="main-container">
        
        <div style="text-align: center;">
            <div class="instruction-box">
                <i class="fa-solid fa-pen-nib"></i> <strong>Instruções:</strong> Leia cada afirmação e marque <strong>V (Verdadeiro)</strong> ou <strong>F (Falso)</strong> conforme descreve como você se sente na maior parte do tempo (nos últimos 2 anos).
            </div>
        </div>

        <div class="question-list" id="q-list">
            </div>

        <button class="btn-calc" onclick="calculate()">
            <i class="fa-solid fa-calculator"></i> CALCULAR RESULTADO
        </button>

        <div id="results" class="results-section">
            <div class="total-score-box">
                <div style="text-transform:uppercase; font-size:0.9rem; opacity:0.8;">Escore Total</div>
                <div class="score-val" id="total-val">0</div>
                <div class="score-class" id="total-class">--</div>
            </div>

            <h3 style="color:var(--text); margin-bottom:20px; text-align:center;">Detalhamento por Subescalas</h3>
            <div class="subs-grid" id="subs-container"></div>

            <button class="btn-calc" style="background:#2d3436; margin-top:30px; font-size:1rem;" onclick="window.print()">
                <i class="fa-solid fa-print"></i> Salvar PDF
            </button>
        </div>

        <center>
            <a href="../listaferramentas.html" class="btn-back"><i class="fa-solid fa-arrow-left"></i> Voltar para Ferramentas</a>
        </center>

    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        const questionsDB = [
            "Por vezes, faço coisas sem pensar muito nelas.",
            "Por vezes, fico subitamente deprimido(a) ou ansioso(a).",
            "Por vezes, sinto-me abandonado pelas pessoas.",
            "Fico raramente desapontado(a) com os meus amigos.",
            "Sinto-me inferior aos outros.",
            "No passado, já ameacei ferir-me a mim próprio.",
            "Não acredito ser capaz de fazer alguma coisa de interessante com a minha vida.",
            "Raramente me zango com outras pessoas.",
            "Por vezes, sinto-me como se não fosse real.",
            "Não tenho relações sexuais com uma pessoa, a menos que a conheça há algum tempo.",
            "Por vezes, depois de me sentir ansioso(a) ou irritado(a) fico triste.",
            "Quando as pessoas que me são próximas morrem ou me deixam, sinto-me abandonado(a).",
            "Exagero frequentemente o valor das amizades e acabo por descobrir depois que, afinal, elas não têm esse valor.",
            "Se eu fosse mais parecido(a) com outras pessoas, sentir-me-ia melhor comigo próprio(a).",
            "Já tentei ferir-me voluntariamente, embora não me quisesse matar.",
            "No geral, a minha vida é bastante aborrecida.",
            "Entro com alguma frequência em 'cenas de pancadaria'.",
            "Por vezes, as pessoas estão longe de me compreender.",
            "Os meus amigos dizem-me que o meu humor se altera muito rapidamente.",
            "Ficar sozinho assusta-me.",
            "As pessoas que parecem honestas muitas vezes acabam por me desiludir.",
            "Já tentei suicidar-me.",
            "Por vezes, sinto-me como se não tivesse nada para oferecer aos outros.",
            "Tenho problemas em controlar o meu temperamento.",
            "Consigo perceber aquilo que vai na cabeça dos outros.",
            "Já experimentei drogas 'duras' (por exemplo, cocaína, heroína).",
            "O meu humor alterna frequentemente ao longo do dia entre estados de felicidade, cólera, ansiedade e depressão.",
            "Quando os meus amigos se vão embora, fico confiante de que os voltarei a ver.",
            "Sinto-me frequentemente desapontado pelos meus amigos.",
            "Já me cortei propositadamente.",
            "Muitas vezes, sinto-me sozinho(a) e abandonado(a).",
            "Não tenho grandes dificuldades em controlar o meu temperamento.",
            "Por vezes, vejo ou ouço coisas que as outras pessoas não conseguem ver ou ouvir.",
            "Na minha opinião, é natural ter relações sexuais num primeiro encontro.",
            "Por vezes, sinto-me muito triste, mas este sentimento pode mudar rapidamente.",
            "As pessoas deixam-me frequentemente ficar mal, ou 'empurram-me' para baixo.",
            "Gostava de ser mais parecido(a) com alguns dos meus amigos.",
            "Costumava tentar ferir-me para obter alguma atenção.",
            "Sou, com grande frequência, diferente com diferentes pessoas em diferentes situações de tal forma que, às vezes, já não sei verdadeiramente quem sou.",
            "Irrito-me facilmente com os outros.",
            "Por vezes, consigo ouvir aquilo que as outras pessoas estão a pensar.",
            "Fico 'pedrado' (com drogas) sempre que me apetece.",
            "Raramente me sinto triste ou ansioso(a).",
            "Ninguém gosta de mim.",
            "Quando confio nas pessoas, elas raramente me desiludem.",
            "Sinto que as pessoas não gostariam de mim se me conhecessem verdadeiramente.",
            "Irrito-me facilmente.",
            "É impossível 'ler' a mente dos outros.",
            "Por vezes, sinto-me muito feliz, mas este sentimento pode mudar rapidamente.",
            "Acho difícil depender dos outros porque eles nunca estão presentes quando preciso.",
            "As amizades com as pessoas que me interessam têm muitos altos e baixos.",
            "Sinto-me à-vontade com a minha maneira de ser.",
            "Nunca tentei ferir-me.",
            "Raramente me sinto sozinho(a).",
            "Por vezes, acho que as mais pequenas coisas me irritam.",
            "Por vezes, não consigo distinguir entre o real e o imaginário.",
            "Quando bebo, bebo muito.",
            "Considero-me uma pessoa mal-humorada.",
            "Tenho dificuldades em desenvolver relações de amizades próximas, porque as pessoas frequentemente me abandonam.",
            "Os meus amigos estão sempre presentes quando preciso deles.",
            "Gostaria de ser outra pessoa.",
            "Acho que a minha vida não é muito interessante.",
            "Quando estou irritado(a), por vezes, atiro e bato em objectos partindo-os.",
            "Nos últimos tempos apanhei várias multas por excesso de velocidade.",
            "Por vezes, sinto-me como se estivesse numa 'montanha-russa' emocional.",
            "Sinto-me como se a minha família me tivesse abandonado.",
            "Sinto-me à-vontade com a pessoa que sinto ser.",
            "Por vezes, faço coisas impulsivamente.",
            "A minha vida não tem sentido.",
            "Não tenho a certeza sobre aquilo que quero fazer no futuro.",
            "Por vezes, como tanto que fico com dores de barriga ou tenho mesmo de vomitar.",
            "As pessoas já me disseram que sou uma pessoa temperamental.",
            "Por vezes, as pessoas de quem gosto abandonam-me.",
            "Muitas vezes, em situações sociais, sinto que as outras pessoas podem ver através de mim e perceber que não tenho muito para dar.",
            "Já fui hospitalizado por me ter ferido propositadamente.",
            "Muitas vezes, sinto uma espécie de vazio dentro de mim.",
            "Muitas vezes, os outros irritam-me.",
            "Muitas vezes, fico irrequieto apenas por pensar que alguém de quem eu gosto verdadeiramente me pode deixar.",
            "Por vezes, sinto-me confuso(a) com os meus objectivos a longo prazo.",
            "Os outros dizem que me irrito facilmente."
        ];

        // Lógica Subescalas (1-based index from PDF logic)
        const subscales = {
            "Impulsividade": { items: [1, 10, 26, 34, 42, 57, 64, 68, 71], reverse: [10] },
            "Instabilidade Afetiva": { items: [2, 11, 19, 27, 35, 43, 49, 58, 65, 72], reverse: [43] },
            "Abandono": { items: [3, 12, 20, 28, 44, 50, 59, 66, 73, 78], reverse: [28] },
            "Relacionamentos": { items: [4, 13, 21, 29, 36, 45, 51, 60], reverse: [4, 45, 60] },
            "Autoimagem": { items: [5, 14, 37, 46, 52, 61, 67, 70, 74], reverse: [52, 67] },
            "Suicídio/Automutilação": { items: [6, 15, 22, 30, 38, 53, 75], reverse: [53] },
            "Vazio": { items: [7, 16, 23, 31, 39, 54, 62, 69, 76, 79], reverse: [54] },
            "Raiva Intensa": { items: [8, 17, 24, 32, 40, 47, 55, 63, 77, 80], reverse: [8, 32] },
            "Estados Quase-Psicóticos": { items: [9, 18, 25, 33, 41, 48, 56], reverse: [48] }
        };

        const answers = new Array(81).fill(null);

        // Inicializar
        const list = document.getElementById('q-list');
        questionsDB.forEach((text, index) => {
            const i = index + 1;
            const row = document.createElement('div');
            row.className = 'q-row';
            row.setAttribute('data-aos', 'fade-up');
            
            row.innerHTML = `
                <div class="q-info">
                    <span class="q-num">${i}.</span>
                    <span class="q-text">${text}</span>
                </div>
                <div class="btn-group">
                    <div class="q-btn true-btn" id="btn-t-${i}" onclick="setAnswer(${i}, true)">V</div>
                    <div class="q-btn false-btn" id="btn-f-${i}" onclick="setAnswer(${i}, false)">F</div>
                </div>
            `;
            list.appendChild(row);
        });

        function setAnswer(id, value) {
            answers[id] = value;
            const btnT = document.getElementById(`btn-t-${id}`);
            const btnF = document.getElementById(`btn-f-${id}`);
            
            btnT.classList.remove('selected');
            btnF.classList.remove('selected');
            
            if (value === true) btnT.classList.add('selected');
            else btnF.classList.add('selected');
        }

        function calculate() {
            let total = 0;
            let subResults = {};
            let missing = false;

            for(let i=1; i<=80; i++) {
                if(answers[i] === null) missing = true;
            }

            if(missing) {
                if(!confirm("Algumas questões estão em branco. O resultado pode ser impreciso. Continuar mesmo assim?")) return;
            }

            // Cálculo
            for (const [name, data] of Object.entries(subscales)) {
                let subScore = 0;
                data.items.forEach(idx => {
                    const ans = answers[idx];
                    const isReverse = data.reverse.includes(idx);
                    
                    // Lógica de pontuação:
                    // Se item direto: V=1, F=0
                    // Se item reverso: V=0, F=1
                    if ((ans === true && !isReverse) || (ans === false && isReverse)) {
                        subScore++;
                    }
                });
                subResults[name] = subScore;
                total += subScore;
            }

            // Renderizar Resultados
            document.getElementById('total-val').innerText = total;
            
            const classElem = document.getElementById('total-class');
            if(total < 30) {
                classElem.innerText = "Baixo Risco";
                classElem.style.background = "#00b894";
            } else if (total < 43) {
                classElem.innerText = "Moderado";
                classElem.style.background = "#fdcb6e";
                classElem.style.color = "#333";
            } else {
                classElem.innerText = "Alto Risco Clínico";
                classElem.style.background = "#ff7675";
                classElem.style.color = "white";
            }

            const subContainer = document.getElementById('subs-container');
            subContainer.innerHTML = '';
            
            for (const [name, score] of Object.entries(subResults)) {
                const max = subscales[name].items.length;
                subContainer.innerHTML += `
                    <div class="sub-card">
                        <span class="sub-name">${name}</span>
                        <span class="sub-val">${score} <span class="sub-max">/${max}</span></span>
                    </div>
                `;
            }

            const resultSection = document.getElementById('results');
            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
