<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escala de Esquemas Emocionais (LESS-II) | Bruno de Souza</title>
    
    <script>
        if(localStorage.getItem('logado') !== 'sim') {
            window.location.href = "../../login.html";
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /* --- RESET & BASES --- */
        * { box-sizing: border-box; }

        :root {
            --bg-color: #f4f6f8;
            --primary: #455a64;   /* Cinza Azulado (Sóbrio/Clínico) */
            --secondary: #607d8b;
            --accent: #00bcd4;    /* Ciano para destaque */
            --text: #263238;
            --card-bg: #ffffff;
            --scale-1: #e57373; /* Muito falso */
            --scale-6: #81c784; /* Muito verdadeiro */
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#cfd8dc 2px, transparent 2px);
            background-size: 20px 20px;
            margin: 0; padding: 20px;
            color: var(--text);
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- HEADER --- */
        header {
            text-align: center; margin-bottom: 30px;
            background: white; padding: 30px 40px;
            border-radius: 20px; border-top: 5px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            max-width: 900px; width: 100%; position: relative;
        }

        header h1 { color: var(--primary); margin: 0; font-weight: 800; font-size: 1.8rem; letter-spacing: 1px; }
        .subtitle { color: #78909c; font-weight: 600; margin-top: 5px; font-size: 1rem; }

        .btn-print {
            position: absolute; top: 25px; right: 30px;
            background: transparent; border: 2px solid var(--primary); color: var(--primary);
            padding: 8px 20px; border-radius: 30px; font-weight: 700; cursor: pointer; transition: 0.3s;
        }
        .btn-print:hover { background: var(--primary); color: white; }

        /* --- INSTRUCTIONS --- */
        .intro-box {
            background: #eceff1; padding: 20px; border-radius: 15px; margin-bottom: 30px;
            max-width: 900px; width: 100%; border-left: 5px solid var(--accent);
            color: #455a64; font-size: 0.95rem; line-height: 1.5;
        }

        /* --- QUESTIONNAIRE --- */
        .question-list {
            width: 100%; max-width: 900px; display: flex; flex-direction: column; gap: 20px;
        }

        .q-card {
            background: white; padding: 25px; border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); border: 1px solid #eee;
            transition: transform 0.2s;
        }
        .q-card:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.06); }

        .q-text { font-weight: 700; font-size: 1.1rem; margin-bottom: 15px; color: var(--text); }
        .q-num { color: var(--accent); margin-right: 10px; font-weight: 800; }

        /* Likert Scale Styles */
        .likert-container {
            display: flex; justify-content: space-between; align-items: center;
            background: #fafafa; padding: 10px 15px; border-radius: 50px;
            border: 1px solid #f0f0f0; flex-wrap: wrap; gap: 10px;
        }

        .likert-option {
            display: flex; flex-direction: column; align-items: center; cursor: pointer; position: relative;
        }

        .likert-option input { position: absolute; opacity: 0; cursor: pointer; }

        .circle {
            width: 35px; height: 35px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; border: 2px solid #cfd8dc; color: #90a4ae;
            transition: 0.2s; background: white;
        }

        .likert-option:hover .circle { border-color: var(--secondary); color: var(--secondary); }

        /* Checked State */
        .likert-option input:checked + .circle {
            background: var(--primary); color: white; border-color: var(--primary); transform: scale(1.1);
        }

        .scale-label { font-size: 0.7rem; color: #90a4ae; margin-top: 5px; font-weight: 600; text-transform: uppercase; }

        /* --- BUTTONS --- */
        .btn-calc {
            width: 100%; max-width: 900px; padding: 18px; border-radius: 50px; border: none;
            background: var(--primary); color: white; font-weight: 800; font-size: 1.2rem;
            cursor: pointer; transition: 0.3s; margin-top: 30px; margin-bottom: 50px;
            box-shadow: 0 5px 20px rgba(69, 90, 100, 0.3); display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        .btn-calc:hover { background: #37474f; transform: translateY(-3px); }

        /* --- RESULTS --- */
        .results-section {
            width: 100%; max-width: 900px; display: none; flex-direction: column; gap: 20px; margin-bottom: 50px;
        }

        .result-card {
            background: white; border-radius: 15px; padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05); border-left: 6px solid var(--accent);
            animation: fadeIn 0.5s ease;
        }

        .dim-title { font-size: 1.2rem; font-weight: 800; color: var(--primary); margin-bottom: 5px; }
        .dim-score { font-size: 2rem; font-weight: 800; color: var(--accent); float: right; margin-left: 15px; }
        .dim-desc { font-size: 0.9rem; color: #546e7a; line-height: 1.5; margin-top: 10px; font-style: italic; background: #f1f8e9; padding: 10px; border-radius: 8px; }

        /* PRINT */
        #print-content { display: none; }

        @media (max-width: 600px) {
            .likert-container { border-radius: 15px; justify-content: center; }
            .circle { width: 30px; height: 30px; font-size: 0.9rem; }
            .btn-print span { display: none; }
        }

        @media print {
            body { background: white; padding: 0; }
            header button, .intro-box, .question-list, .btn-calc, .btn-back-home { display: none !important; }
            header { border: none; border-bottom: 2px solid #000; padding: 0; margin-bottom: 20px; }
            
            .results-section { display: block !important; }
            .result-card { box-shadow: none; border: 1px solid #ccc; page-break-inside: avoid; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header data-aos="fade-down">
        <button class="btn-print" onclick="window.print()"><i class="fa-solid fa-print"></i> <span>Imprimir Relatório</span></button>
        <h1>Escala de Esquemas Emocionais (LESS-II)</h1>
        <div class="subtitle">Avaliação de como você lida com sentimentos e emoções</div>
    </header>

    <div class="intro-box" data-aos="fade-up">
        <strong>Instruções:</strong> Leia cada sentença e classifique o quanto é verdadeira ou falsa para você usando a escala de 1 a 6.<br>
        <strong>1 = Muito falso | 6 = Muito verdadeiro</strong>.
    </div>

    <div class="question-list" id="questionList">
        </div>

    <button class="btn-calc" onclick="calculateResults()">
        <i class="fa-solid fa-calculator"></i> Calcular Esquemas
    </button>

    <div class="results-section" id="results">
        <h2 style="color:var(--primary); text-align:center; margin-bottom:20px;">Perfil de Esquemas Emocionais</h2>
        <div id="resultsContainer"></div>
    </div>

    <center>
        <a href="../listaferramentas.html" style="display:inline-block; margin-top:20px; color:#b2bec3; text-decoration:none; font-weight:600;" class="btn-back-home">
            <i class="fa-solid fa-arrow-left"></i> Voltar
        </a>
    </center>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        // 1. DADOS DAS QUESTÕES
        const questions = [
            "Frequentemente penso que respondo com sentimentos que outras pessoas não teriam.",
            "É errado ter determinados sentimentos.",
            "Existem coisas a meu respeito que simplesmente não compreendo.",
            "Acredito que é importante me permitir chorar para deixar meus sentimentos 'saírem'.",
            "Se me permitir ter alguns desses sentimentos, temo perder o controle.",
            "Outras pessoas compreendem e aceitam meus sentimentos.",
            "Meus sentimentos não fazem sentido para mim.",
            "Se as outras pessoas mudassem, eu me sentiria muito melhor.",
            "Às vezes, temo que, se me permitisse ter um sentimento forte, ele não iria mais embora.",
            "Sinto vergonha dos meus sentimentos.",
            "Coisas que incomodam outras pessoas não me incomodam.",
            "Ninguém se importa com meus sentimentos.",
            "Para mim, é importante ser razoável e prático em vez de sensível e aberto a meus sentimentos.",
            "Quando me sinto para baixo, tento pensar nas coisas mais importantes na vida – o que valorizo.",
            "Sinto que posso expressar meus sentimentos abertamente.",
            "Frequentemente digo a mim mesmo: 'O que há de errado comigo?'.",
            "Fico preocupado com não ser capaz de controlar meus sentimentos.",
            "Você precisa se policiar contra determinados sentimentos.",
            "Sentimentos fortes duram apenas um curto período de tempo.",
            "Frequentemente me sinto 'anestesiado' emocionalmente – como se não tivesse sentimentos.",
            "Outras pessoas me provocam sentimentos desagradáveis.",
            "Quando me sinto para baixo, fico sozinho e penso muito sobre como me sinto mal.",
            "Gosto de ter absoluta certeza quanto à maneira como me sinto em relação a outra pessoa.",
            "Aceito meus sentimentos.",
            "Acho que tenho os mesmos sentimentos que as outras pessoas.",
            "Aspiro a valores mais elevados.",
            "Penso que é importante ser racional e lógico em quase tudo.",
            "Gosto de ter absoluta certeza quanto à maneira como me sinto em relação a mim mesmo."
        ];

        // 2. LÓGICA DAS DIMENSÕES (Mapping)
        // Format: { name: "Nome", items: [index1, index2], reverse: [index_to_reverse] }
        // OBS: Indices aqui são 0-based (Questão 1 = index 0)
        const dimensions = [
            { id: "invalidacao", name: "Invalidação", items: [5, 11], reverse: [5], desc: "Percepção de que outros não aceitam ou compreendem seus sentimentos." }, // 6 e 12 (5 e 11 zero-based)
            { id: "incompreensibilidade", name: "Incompreensibilidade", items: [2, 6], reverse: [], desc: "Dificuldade em entender ou dar sentido às próprias emoções." }, // 3 e 7
            { id: "culpa", name: "Culpa", items: [1, 9], reverse: [], desc: "Sentir que é errado ou vergonhoso ter certas emoções." }, // 2 e 10
            { id: "visao_simplista", name: "Visão Simplista da Emoção", items: [22, 27], reverse: [], desc: "Desejo de ter certeza absoluta e sentimentos não ambivalentes." }, // 23 e 28
            { id: "desvalorizado", name: "Desvalorizado (Valores)", items: [13, 25], reverse: [13, 25], desc: "Dificuldade em focar no que é importante/valores quando se sente mal." }, // 14 e 26
            { id: "perda_controle", name: "Perda do Controle", items: [4, 16], reverse: [], desc: "Medo de que as emoções dominem ou se tornem incontroláveis." }, // 5 e 17
            { id: "paralisia", name: "Torpor / Paralisia", items: [10, 19], reverse: [], desc: "Sentir-se anestesiado ou desconectado das emoções." }, // 11 e 20
            { id: "racional", name: "Excessivamente Racional", items: [12, 26], reverse: [], desc: "Foco na lógica e razão em detrimento da experiência emocional." }, // 13 e 27
            { id: "duracao", name: "Duração", items: [8, 18], reverse: [18], desc: "Crença de que sentimentos fortes durarão para sempre." }, // 9 e 19
            { id: "baixo_consenso", name: "Baixo Consenso", items: [0, 24], reverse: [24], desc: "Achar que suas emoções são anormais ou diferentes das outras pessoas." }, // 1 e 25
            { id: "nao_aceitacao", name: "Não Aceitação", items: [23, 17], reverse: [23], desc: "Recusa em aceitar os sentimentos como eles são." }, // 24 e 18
            { id: "ruminacao", name: "Ruminação", items: [21, 15], reverse: [], desc: "Focar excessivamente na dor ou no 'por que' sem resolver." }, // 22 e 16
            { id: "baixa_expressao", name: "Baixa Expressão", items: [3, 14], reverse: [3, 14], desc: "Dificuldade ou recusa em expressar sentimentos abertamente." }, // 4 e 15
            { id: "acusacao", name: "Acusação / Culpabilização", items: [7, 20], reverse: [], desc: "Atribuir a causa dos sentimentos ruins exclusivamente aos outros." } // 8 e 21
        ];

        // 3. RENDERIZAÇÃO
        function renderQuestions() {
            const list = document.getElementById('questionList');
            questions.forEach((q, index) => {
                const num = index + 1;
                const card = document.createElement('div');
                card.className = 'q-card';
                
                let scaleHtml = '';
                for(let i=1; i<=6; i++) {
                    scaleHtml += `
                        <label class="likert-option">
                            <input type="radio" name="q${index}" value="${i}">
                            <div class="circle">${i}</div>
                            ${i===1 ? '<span class="scale-label">Muito Falso</span>' : ''}
                            ${i===6 ? '<span class="scale-label">Muito Verdadeiro</span>' : ''}
                        </label>
                    `;
                }

                card.innerHTML = `
                    <div class="q-text"><span class="q-num">${num}.</span> ${q}</div>
                    <div class="likert-container">${scaleHtml}</div>
                `;
                list.appendChild(card);
            });
        }

        // 4. CÁLCULO
        function calculateResults() {
            // Coleta respostas
            const answers = [];
            for(let i=0; i<questions.length; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if(!selected) {
                    alert(`Por favor, responda a questão ${i+1}.`);
                    document.querySelector(`input[name="q${i}"]`).closest('.q-card').scrollIntoView({behavior: 'smooth'});
                    return;
                }
                answers.push(parseInt(selected.value));
            }

            // Processa Dimensões
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.innerHTML = '';
            
            dimensions.forEach(dim => {
                let score = 0;
                let count = 0;

                dim.items.forEach(idx => {
                    let val = answers[idx];
                    
                    // Verifica se é reverso
                    if(dim.reverse.includes(idx)) {
                        val = 7 - val; // Inversão (1->6, 6->1)
                    }
                    score += val;
                    count++;
                });

                const average = (score / count).toFixed(1);
                
                // Cria card de resultado
                const card = document.createElement('div');
                card.className = 'result-card';
                card.innerHTML = `
                    <span class="dim-score">${average}</span>
                    <div class="dim-title">${dim.name}</div>
                    <div style="width:100%; height:10px; background:#eee; border-radius:5px; margin:5px 0;">
                        <div style="width:${(average/6)*100}%; height:100%; background:var(--accent); border-radius:5px;"></div>
                    </div>
                    <div class="dim-desc"><strong>Significado:</strong> ${dim.desc}</div>
                `;
                resultsContainer.appendChild(card);
            });

            document.getElementById('results').style.display = 'flex';
            window.scrollTo({ top: document.getElementById('results').offsetTop - 50, behavior: 'smooth' });
        }

        // Init
        renderQuestions();

    </script>

</body>
</html>
