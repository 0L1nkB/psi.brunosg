<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cruzadinha Cl√≠nica DSM-5 | Bruno de Souza</title>
    
    <script>
        if(localStorage.getItem('logado') !== 'sim') {
            window.location.href = "../../login.html";
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22;
            --bg-body: #ecf0f1;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-light: #7f8c8d;
            --cell-size: 32px;
            --cell-blocked: #2d3436;
            --correct-bg: #27ae60;
            --wrong-bg: #c0392b;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0; padding: 20px;
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
        }

        /* HEADER */
        header {
            background: var(--card-bg); padding: 20px 40px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center;
            width: 100%; max-width: 1200px; margin-bottom: 20px;
            border-bottom: 5px solid var(--accent); position: relative;
        }

        header h1 { margin: 0; color: var(--primary); font-size: 1.8rem; font-weight: 800; text-transform: uppercase; }
        .subtitle { color: var(--text-light); font-weight: 600; margin-top: 5px; }

        .btn-print {
            position: absolute; top: 25px; right: 30px;
            background: transparent; border: 2px solid var(--primary); color: var(--primary);
            padding: 8px 20px; border-radius: 30px; font-weight: 700; cursor: pointer; transition: 0.3s;
        }
        .btn-print:hover { background: var(--primary); color: white; }

        /* CONTROLS */
        .control-panel {
            width: 100%; max-width: 1200px; background: var(--card-bg);
            padding: 15px; border-radius: 15px; margin-bottom: 20px;
            display: flex; gap: 15px; align-items: center; flex-wrap: wrap;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
        }

        .select-wrapper { flex: 2; min-width: 300px; }
        select {
            width: 100%; padding: 12px; border-radius: 10px; border: 2px solid #dfe6e9;
            font-family: inherit; font-size: 0.9rem; font-weight: 700; color: var(--text-main);
            cursor: pointer;
        }

        .btn-game {
            padding: 10px 20px; border-radius: 10px; border: none; cursor: pointer;
            font-weight: 800; color: white; display: flex; align-items: center; gap: 8px;
            transition: transform 0.2s;
        }
        .btn-game:hover { transform: translateY(-2px); }
        
        .btn-check { background: #27ae60; }
        .btn-answers { background: #f39c12; }
        .btn-new { background: var(--primary); }

        /* GAME LAYOUT */
        .game-layout {
            display: grid; grid-template-columns: auto 350px; gap: 20px;
            width: 100%; max-width: 1300px; align-items: start;
        }

        .grid-wrapper {
            background: var(--primary); padding: 15px; border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: auto; display: flex; justify-content: center; align-items: center;
            min-height: 550px; position: relative;
        }

        #crosswordGrid {
            display: grid; gap: 1px; background: var(--cell-blocked); border: 5px solid var(--cell-blocked);
        }

        .cell {
            width: var(--cell-size); height: var(--cell-size);
            background: var(--cell-blocked); position: relative;
        }

        .cell.active { background: #fff; }

        .cell input {
            width: 100%; height: 100%; border: none; text-align: center;
            font-family: 'Quicksand', sans-serif; font-weight: 800; font-size: 1.1rem;
            text-transform: uppercase; color: var(--text-main); background: transparent;
            padding: 0; outline: none; cursor: text;
        }
        
        .cell input:focus { background: #e3f2fd; }
        .cell.correct input { background: #e0f7fa; color: var(--correct-bg); }
        .cell.wrong input { background: #ffebee; color: var(--wrong-bg); }

        .cell-num {
            position: absolute; top: 1px; left: 2px; font-size: 9px;
            color: var(--primary); font-weight: 800; pointer-events: none;
        }

        /* CLUES */
        .clues-panel {
            background: white; border-radius: 15px; padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); height: 600px;
            display: flex; flex-direction: column;
        }

        .clues-content { flex: 1; overflow-y: auto; padding-right: 5px; }
        
        /* Scrollbar estilizada */
        .clues-content::-webkit-scrollbar { width: 5px; }
        .clues-content::-webkit-scrollbar-thumb { background: #ccc; border-radius: 5px; }

        .clue-group-title {
            color: var(--primary); border-bottom: 2px solid #eee; margin: 15px 0 5px 0;
            font-weight: 800; font-size: 0.9rem; text-transform: uppercase;
        }
        
        .clue-item {
            padding: 6px 8px; margin-bottom: 5px; cursor: pointer; font-size: 0.85rem;
            border-left: 3px solid transparent; transition: 0.2s;
        }
        .clue-item:hover { background: #f7f9fa; border-left-color: var(--accent); }
        
        /* MODAL */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 2000; display: none;
            align-items: center; justify-content: center;
        }
        .modal-box {
            background: white; width: 90%; max-width: 600px; max-height: 80vh;
            border-radius: 15px; padding: 25px; overflow-y: auto;
        }
        .answer-row { margin-bottom: 5px; border-bottom: 1px solid #eee; padding: 5px 0; }

        @media (max-width: 900px) {
            .game-layout { grid-template-columns: 1fr; }
            .grid-wrapper { min-height: 400px; }
            .clues-panel { height: auto; max-height: 400px; }
            .btn-print span { display: none; }
        }

        @media print {
            header button, .control-panel { display: none !important; }
            .game-layout { display: block; }
            .grid-wrapper { box-shadow: none; padding: 0; background: transparent; }
            .crossword-grid { border: 2px solid #000; background: #000; }
            .cell { border: 1px solid #000; background: #000; }
            .cell.active { background: white !important; }
            .cell input { color: transparent !important; }
            .clues-panel { box-shadow: none; height: auto; border: 1px solid #ccc; margin-top: 20px; }
        }
    </style>
</head>
<body>

    <header>
        <button class="btn-print" onclick="window.print()"><i class="fa-solid fa-print"></i> <span>Imprimir</span></button>
        <h1>Cruzadinha Cl√≠nica DSM-5</h1>
        <div class="subtitle">Exerc√≠cio de Fixa√ß√£o de Crit√©rios Diagn√≥sticos</div>
    </header>

    <div class="control-panel">
        <div class="select-wrapper">
            <select id="levelSelect" onchange="generateGame()">
                <optgroup label="1. Neurodesenvolvimento">
                    <option value="tea">TEA (Autismo)</option>
                    <option value="tdah">TDAH</option>
                </optgroup>
                <optgroup label="2. Espectro da Esquizofrenia">
                    <option value="esquizofrenia">Esquizofrenia</option>
                </optgroup>
                <optgroup label="3. Humor">
                    <option value="bipolar">Transtorno Bipolar</option>
                    <option value="depressao_maior">Transtorno Depressivo Maior</option>
                    <option value="tdpm">Disf√≥rico Pr√©-Menstrual</option>
                </optgroup>
                <optgroup label="4. Ansiedade">
                    <option value="ans_separacao">Ansiedade de Separa√ß√£o</option>
                    <option value="ans_social">Ansiedade Social (Fobia)</option>
                    <option value="panico">Transtorno do P√¢nico</option>
                    <option value="agorafobia">Agorafobia</option>
                    <option value="tag">TAG (Generalizada)</option>
                </optgroup>
                <optgroup label="5. TOC & Relacionados">
                    <option value="toc">TOC</option>
                    <option value="dismorfico">Dism√≥rfico Corporal</option>
                    <option value="acumulacao">Acumula√ß√£o</option>
                    <option value="tricotilomania">Tricotilomania</option>
                </optgroup>
                <optgroup label="6. Trauma & Estresse">
                    <option value="apego_reativo">Apego Reativo</option>
                    <option value="tept">TEPT</option>
                    <option value="estresse_agudo">Estresse Agudo</option>
                </optgroup>
                <optgroup label="7. Alimentares">
                    <option value="pica">Pica</option>
                    <option value="ruminacao">Rumina√ß√£o</option>
                    <option value="arfid">ARFID (Restritivo/Evitativo)</option>
                    <option value="anorexia">Anorexia Nervosa</option>
                    <option value="bulimia">Bulimia Nervosa</option>
                    <option value="compulsao_alim">Compuls√£o Alimentar</option>
                </optgroup>
                <optgroup label="8. Sono-Vig√≠lia">
                    <option value="insonia">Ins√¥nia</option>
                    <option value="hipersonolencia">Hipersonol√™ncia</option>
                    <option value="narcolepsia">Narcolepsia</option>
                </optgroup>
                <optgroup label="9. Disruptivos & Conduta">
                    <option value="tod">TOD (Opositivo Desafiador)</option>
                    <option value="explosivo">Explosivo Intermitente</option>
                    <option value="conduta">Transtorno da Conduta</option>
                    <option value="piromania">Piromania</option>
                    <option value="cleptomania">Cleptomania</option>
                </optgroup>
                <optgroup label="10. Subst√¢ncias">
                    <option value="substancias">Uso de Subst√¢ncias (Geral)</option>
                    <option value="jogo">Jogo de Azar (Gambling)</option>
                </optgroup>
                <optgroup label="11. Personalidade - Cluster A">
                    <option value="paranoide">Paranoide</option>
                    <option value="esquizoide">Esquizoide</option>
                    <option value="esquizotipica">Esquizot√≠pica</option>
                </optgroup>
                <optgroup label="11. Personalidade - Cluster B">
                    <option value="antissocial">Antissocial</option>
                    <option value="borderline">Borderline</option>
                    <option value="histrionica">Histri√¥nica</option>
                    <option value="narcisista">Narcisista</option>
                </optgroup>
                <optgroup label="11. Personalidade - Cluster C">
                    <option value="evitativa">Evitativa</option>
                    <option value="dependente">Dependente</option>
                    <option value="ob_compulsiva">Obsessivo-Compulsiva</option>
                </optgroup>
            </select>
        </div>

        <button class="btn-game btn-new" onclick="generateGame()">
            <i class="fa-solid fa-shuffle"></i> Novo Jogo
        </button>
        <button class="btn-game btn-check" onclick="checkGame()">
            <i class="fa-solid fa-check"></i> Verificar
        </button>
        <button class="btn-game btn-answers" onclick="showAnswers()">
            <i class="fa-solid fa-key"></i> Gabarito
        </button>
    </div>

    <div class="game-layout">
        <div class="grid-wrapper">
            <div id="crosswordGrid"></div>
        </div>

        <div class="clues-panel">
            <div class="clues-content">
                <div class="clue-group-title">Horizontais</div>
                <div id="listH"></div>
                <div class="clue-group-title" style="margin-top:20px;">Verticais</div>
                <div id="listV"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="modalAnswers">
        <div class="modal-box">
            <h2 style="margin-top:0; color:var(--primary)">Gabarito</h2>
            <div id="answersList"></div>
            <button class="btn-game btn-new" style="margin-top:20px; width:100%; justify-content:center;" onclick="document.getElementById('modalAnswers').style.display='none'">Fechar</button>
        </div>
    </div>

    <center>
        <a href="../listaferramentas.html" style="display:inline-block; margin-top:40px; color:#b2bec3; text-decoration:none; font-weight:600;" class="btn-back-home">
            <i class="fa-solid fa-arrow-left"></i> Voltar
        </a>
    </center>

    <script>
        // ============================================
        // üìö BANCO DE DADOS DETALHADO (DSM-5)
        // ============================================
        const DB = {
            // 1. NEURODESENVOLVIMENTO
            tea: [
                {t:"ECOLALIA", d:"Repeti√ß√£o de palavras ou frases."}, 
                {t:"HIPERFOCO", d:"Interesse intenso e restrito."}, 
                {t:"ROTINA", d:"Apego excessivo a rituais."}, 
                {t:"SENSORIAL", d:"Hipersensibilidade a sons ou luzes."}, 
                {t:"ISOLAMENTO", d:"Dificuldade na reciprocidade social."}, 
                {t:"LITERAL", d:"Dificuldade em entender met√°foras."}, 
                {t:"ESTEREO", d:"Movimentos estereotipados (flapping)."}, 
                {t:"CONTATO", d:"Evita olhar nos olhos."}, 
                {t:"RIGIDEZ", d:"Inflexibilidade para mudan√ßas."}, 
                {t:"ATIPICO", d:"Desenvolvimento n√£o usual da fala."}
            ],
            tdah: [
                {t:"DESATENCAO", d:"Dificuldade em manter o foco em tarefas."}, 
                {t:"HIPERATIVO", d:"Agita√ß√£o motora excessiva."}, 
                {t:"IMPULSO", d:"Agir sem pensar nas consequ√™ncias."}, 
                {t:"ESQUECER", d:"Perde objetos necess√°rios."}, 
                {t:"INTERROMPER", d:"Fala por cima dos outros."}, 
                {t:"INQUIETO", d:"N√£o consegue ficar sentado."}, 
                {t:"ERROS", d:"Comete falhas por descuido."}, 
                {t:"MENTAL", d:"Evita esfor√ßo mental sustentado."}, 
                {t:"PRAZO", d:"Dificuldade em cumprir hor√°rios."}, 
                {t:"DESORGANIZA", d:"Caos em tarefas e atividades."}
            ],
            // 2. ESQUIZOFRENIA
            esquizofrenia: [
                {t:"DELIRIO", d:"Cren√ßa fixa e falsa."}, 
                {t:"ALUCINACAO", d:"Percep√ß√£o sem est√≠mulo (ouvir vozes)."}, 
                {t:"CATATONIA", d:"Imobilidade ou agita√ß√£o motora."}, 
                {t:"DESORGANIZA", d:"Discurso ou pensamento confuso."}, 
                {t:"NEGATIVOS", d:"Sintomas como apatia e abulia."}, 
                {t:"AFETO", d:"Embotamento emocional."}, 
                {t:"PARANOIA", d:"Sentimento de persegui√ß√£o."}, 
                {t:"SURTO", d:"Epis√≥dio agudo de psicose."}, 
                {t:"LOGICA", d:"Falha no racioc√≠nio."}, 
                {t:"SOCIAL", d:"Retraimento e isolamento."}
            ],
            // 3. HUMOR
            bipolar: [
                {t:"MANIA", d:"Fase de euforia e energia excessiva."}, 
                {t:"DEPRESSAO", d:"Fase de tristeza e baixa energia."}, 
                {t:"GRANDEZA", d:"Sentimento de poder ou import√¢ncia inflado."}, 
                {t:"SONO", d:"Necessidade diminu√≠da de dormir."}, 
                {t:"FALA", d:"Press√£o para falar (verborragia)."}, 
                {t:"RISCO", d:"Comportamentos perigosos e impulsivos."}, 
                {t:"COMPRAS", d:"Gastos excessivos na fase man√≠aca."}, 
                {t:"IDEIAS", d:"Fuga de pensamentos."}, 
                {t:"LITIO", d:"Estabilizador de humor comum."}, 
                {t:"OSCILACAO", d:"Mudan√ßa c√≠clica de humor."}
            ],
            depressao_maior: [
                {t:"TRISTEZA", d:"Humor deprimido na maior parte do dia."}, 
                {t:"ANEDONIA", d:"Perda de interesse ou prazer."}, 
                {t:"PESO", d:"Ganho ou perda significativa sem dieta."}, 
                {t:"INSONIA", d:"Dificuldade para dormir quase todos os dias."}, 
                {t:"CULPA", d:"Sentimento de inutilidade excessiva."}, 
                {t:"FADIGA", d:"Perda de energia ou cansa√ßo."}, 
                {t:"CONCENTRA", d:"Capacidade diminu√≠da de pensar."}, 
                {t:"MORTE", d:"Pensamentos recorrentes sobre o fim."}, 
                {t:"LENTIDAO", d:"Retardo psicomotor observ√°vel."}, 
                {t:"VAZIO", d:"Sensa√ß√£o interna frequente."}
            ],
            tdpm: [
                {t:"LABILIDADE", d:"Mudan√ßas r√°pidas de humor."}, 
                {t:"IRRITA", d:"Irritabilidade ou raiva persistente."}, 
                {t:"HUMOR", d:"Deprimido ou sem esperan√ßa."}, 
                {t:"ANSIEDADE", d:"Tens√£o acentuada."}, 
                {t:"INTERESSE", d:"Diminui√ß√£o nas atividades habituais."}, 
                {t:"CONCENTRA", d:"Dificuldade subjetiva de foco."}, 
                {t:"LETARGIA", d:"Fatigabilidade f√°cil."}, 
                {t:"APETITE", d:"Fissura por carboidratos."}, 
                {t:"INCHACO", d:"Sensa√ß√£o f√≠sica comum."}, 
                {t:"MAMA", d:"Sensibilidade dolorosa."}
            ],
            // 4. ANSIEDADE
            ans_separacao: [
                {t:"AFASTAMENTO", d:"Sofrimento ao sair de casa."}, 
                {t:"PERDA", d:"Medo de perder figuras de apego."}, 
                {t:"PESADELO", d:"Sonhos repetidos sobre separa√ß√£o."}, 
                {t:"CAMA", d:"Recusa em dormir longe de casa."}, 
                {t:"FISICO", d:"Dor de barriga ou cabe√ßa ao separar."}, 
                {t:"SOZINHO", d:"Medo excessivo de ficar s√≥."}, 
                {t:"ESCOLA", d:"Relut√¢ncia em ir √† aula."}, 
                {t:"DANO", d:"Medo de acidente com os pais."}, 
                {t:"APEGO", d:"Necessidade constante de proximidade."}, 
                {t:"CHORO", d:"Rea√ß√£o comum na separa√ß√£o."}
            ],
            ans_social: [
                {t:"JULGAMENTO", d:"Medo de ser avaliado negativamente."}, 
                {t:"ESTRANHOS", d:"Ansiedade com pessoas n√£o familiares."}, 
                {t:"VERGONHA", d:"Medo de ser humilhado."}, 
                {t:"FALAR", d:"Dificuldade de falar em p√∫blico."}, 
                {t:"COMER", d:"Medo de comer na frente de outros."}, 
                {t:"TREMER", d:"Sintoma f√≠sico vis√≠vel."}, 
                {t:"RUBOR", d:"Ficar vermelho de vergonha."}, 
                {t:"EVITACAO", d:"Fugir de situa√ß√µes sociais."}, 
                {t:"CRITICA", d:"Hipersensibilidade a rejei√ß√£o."}, 
                {t:"INTERACAO", d:"Dificuldade em iniciar conversas."}
            ],
            panico: [
                {t:"CORACAO", d:"Palpita√ß√µes ou taquicardia."}, 
                {t:"SUOR", d:"Sudorese intensa repentina."}, 
                {t:"TREMOR", d:"Abalos musculares vis√≠veis."}, 
                {t:"AR", d:"Sensa√ß√£o de falta de ar."}, 
                {t:"SUFOCAR", d:"Sensa√ß√£o de asfixia."}, 
                {t:"DOR", d:"Desconforto tor√°cico."}, 
                {t:"NAUSEA", d:"Desconforto abdominal."}, 
                {t:"TONTURA", d:"Instabilidade ou desmaio."}, 
                {t:"REALIDADE", d:"Desrealiza√ß√£o (sentir que n√£o √© real)."}, 
                {t:"MORTE", d:"Medo iminente de morrer."}
            ],
            agorafobia: [
                {t:"TRANSPORTE", d:"Medo de √¥nibus, trem ou avi√£o."}, 
                {t:"ABERTO", d:"Medo de estacionamentos ou pontes."}, 
                {t:"FECHADO", d:"Medo de lojas ou cinemas."}, 
                {t:"FILA", d:"Medo de esperar em p√©."}, 
                {t:"MULTIDAO", d:"Medo de estar no meio de gente."}, 
                {t:"SOZINHO", d:"Medo de sair de casa desacompanhado."}, 
                {t:"FUGA", d:"Medo de n√£o conseguir escapar."}, 
                {t:"SOCORRO", d:"Medo de n√£o ter ajuda dispon√≠vel."}, 
                {t:"CASA", d:"Lugar seguro (ref√∫gio)."}, 
                {t:"EVITACAO", d:"Deixar de ir aos lugares temidos."}
            ],
            tag: [
                {t:"PREOCUPA", d:"Expectativa apreensiva excessiva."}, 
                {t:"CONTROLE", d:"Dificuldade de controlar a preocupa√ß√£o."}, 
                {t:"NERVOS", d:"Inquieta√ß√£o ou nervos √† flor da pele."}, 
                {t:"CANSACO", d:"Fadigabilidade f√°cil."}, 
                {t:"BRANCO", d:"Dificuldade de concentrar a mente."}, 
                {t:"IRRITA", d:"Irritabilidade f√°cil."}, 
                {t:"TENSAO", d:"Rigidez muscular."}, 
                {t:"SONO", d:"Perturba√ß√£o do descanso."}, 
                {t:"FUTURO", d:"Foco excessivo no 'e se'."}, 
                {t:"SOMATIZA", d:"Sintomas f√≠sicos diversos."}
            ],
            // 5. TOC
            toc: [
                {t:"OBSESSAO", d:"Pensamento intrusivo e indesejado."}, 
                {t:"COMPULSAO", d:"Ato repetitivo para aliviar ansiedade."}, 
                {t:"LIMPEZA", d:"Lavagem excessiva das m√£os."}, 
                {t:"SIMETRIA", d:"Necessidade de ordem perfeita."}, 
                {t:"VERIFICA", d:"Checar portas/g√°s repetidamente."}, 
                {t:"CONTAGEM", d:"Contar objetos mentalmente."}, 
                {t:"DUVIDA", d:"Incerteza patol√≥gica constante."}, 
                {t:"RITUAL", d:"Regras r√≠gidas de execu√ß√£o."}, 
                {t:"ALIVIO", d:"Sensa√ß√£o tempor√°ria p√≥s-ritual."}, 
                {t:"INTRUSIVO", d:"Natureza do pensamento obsessivo."}
            ],
            dismorfico: [
                {t:"DEFEITO", d:"Foco em falha f√≠sica imaginada."}, 
                {t:"APARENCIA", d:"Preocupa√ß√£o excessiva com o corpo."}, 
                {t:"ESPELHO", d:"Verifica√ß√£o compulsiva ou evita√ß√£o."}, 
                {t:"TOCAR", d:"Cutucar a pele ou arrumar cabelo."}, 
                {t:"COMPARAR", d:"Medir-se em rela√ß√£o aos outros."}, 
                {t:"CAMUFLAR", d:"Usar maquiagem/roupa para esconder."}, 
                {t:"FEIO", d:"Cren√ßa de ser deformado."}, 
                {t:"ROSTO", d:"Foco comum (nariz, pele)."}, 
                {t:"CIRURGIA", d:"Busca excessiva por procedimentos."}, 
                {t:"FOCO", d:"Aten√ß√£o seletiva ao 'defeito'."}
            ],
            acumulacao: [
                {t:"DESCARTE", d:"Dificuldade de jogar coisas fora."}, 
                {t:"GUARDAR", d:"Necessidade de salvar itens."}, 
                {t:"ANGUSTIA", d:"Sofrimento ao se desfazer de algo."}, 
                {t:"BAGUNCA", d:"Ac√∫mulo que congestiona a casa."}, 
                {t:"VALOR", d:"Atribui√ß√£o excessiva aos objetos."}, 
                {t:"SENTIMENTAL", d:"Apego emocional aos itens."}, 
                {t:"ESPACO", d:"Perda da √°rea habit√°vel."}, 
                {t:"SEGURANCA", d:"Risco de inc√™ndio ou queda."}, 
                {t:"COMPRA", d:"Aquisi√ß√£o excessiva de itens."}, 
                {t:"CAOS", d:"Desorganiza√ß√£o extrema."}
            ],
            tricotilomania: [
                {t:"ARRANCAR", d:"Puxar cabelos ou pelos."}, 
                {t:"CABELO", d:"Local mais comum (couro cabeludo)."}, 
                {t:"SOBRANCELHA", d:"Outro local comum."}, 
                {t:"FALHA", d:"Perda capilar vis√≠vel."}, 
                {t:"TENSAO", d:"Sentimento antes de arrancar."}, 
                {t:"PRAZER", d:"Al√≠vio ou gratifica√ß√£o ao arrancar."}, 
                {t:"AUTOMATICO", d:"Fazer sem perceber."}, 
                {t:"FOCADO", d:"Fazer com aten√ß√£o plena."}, 
                {t:"VERGONHA", d:"Sentimento social associado."}, 
                {t:"CONTROLE", d:"Tentativas falhas de parar."}
            ],
            // 6. TRAUMA
            apego_reativo: [
                {t:"INIBIDO", d:"Comportamento socialmente retra√≠do."}, 
                {t:"CONFORTO", d:"N√£o busca apoio quando angustiado."}, 
                {t:"RESPOSTA", d:"N√£o responde ao consolo."}, 
                {t:"MEDO", d:"Afeto negativo inexplicado."}, 
                {t:"IRRITA", d:"Irritabilidade sem causa aparente."}, 
                {t:"TRISTEZA", d:"Epis√≥dios de choro durante intera√ß√£o."}, 
                {t:"CUIDADOR", d:"Falha na rela√ß√£o com adultos."}, 
                {t:"NEGLIGENCIA", d:"Hist√≥rico de falta de cuidado."}, 
                {t:"SOCIAL", d:"M√≠nima resposta aos outros."}, 
                {t:"AFETO", d:"Emo√ß√£o positiva limitada."}
            ],
            tept: [
                {t:"FLASHBACK", d:"Reviver o trauma como real."}, 
                {t:"PESADELO", d:"Sonhos angustiantes recorrentes."}, 
                {t:"EVITACAO", d:"Fugir de est√≠mulos associados."}, 
                {t:"HUMOR", d:"Estado emocional negativo."}, 
                {t:"ALERTA", d:"Hipervigil√¢ncia constante."}, 
                {t:"SUSTO", d:"Resposta de sobressalto exagerada."}, 
                {t:"MEMORIA", d:"Amn√©sia de partes do trauma."}, 
                {t:"CULPA", d:"Cren√ßa distorcida sobre a causa."}, 
                {t:"SONO", d:"Dificuldade para dormir."}, 
                {t:"RAIVA", d:"Explos√µes de agressividade."}
            ],
            estresse_agudo: [
                {t:"INTRUSAO", d:"Mem√≥rias invadem a mente."}, 
                {t:"HUMOR", d:"Incapacidade de felicidade."}, 
                {t:"DISSOCIA", d:"Sensa√ß√£o de irrealidade."}, 
                {t:"EVITACAO", d:"Esfor√ßo para n√£o lembrar."}, 
                {t:"ALERTA", d:"Vigil√¢ncia aumentada."}, 
                {t:"TRAUMA", d:"Exposi√ß√£o a evento real."}, 
                {t:"SONHO", d:"Conte√∫do afeta o sono."}, 
                {t:"ANGUSTIA", d:"Sofrimento psicol√≥gico intenso."}, 
                {t:"DIAS", d:"Dura√ß√£o de 3 dias a 1 m√™s."}, 
                {t:"MEMORIA", d:"Falha em recordar detalhes."}
            ],
            // 7. ALIMENTAR
            pica: [
                {t:"INGESTAO", d:"Comer subst√¢ncias n√£o nutritivas."}, 
                {t:"TERRA", d:"Exemplo: Geofagia."}, 
                {t:"GELO", d:"Exemplo: Pagofagia."}, 
                {t:"CABELO", d:"Exemplo: Tricofagia."}, 
                {t:"PAPEL", d:"Ingest√£o comum em crian√ßas."}, 
                {t:"TINTA", d:"Risco de intoxica√ß√£o."}, 
                {t:"METAL", d:"Ingest√£o de objetos."}, 
                {t:"SABAO", d:"Desejo incomum."}, 
                {t:"DESEJO", d:"Vontade incontrol√°vel."}, 
                {t:"MES", d:"Dura√ß√£o m√≠nima de 1 m√™s."}
            ],
            ruminacao: [
                {t:"REGURGITA", d:"Volta do alimento √† boca."}, 
                {t:"REPETIDA", d:"Acontece frequentemente."}, 
                {t:"ENGOLE", d:"Reingest√£o do alimento."}, 
                {t:"COSPE", d:"Expuls√£o do alimento."}, 
                {t:"NAUSEA", d:"Aus√™ncia de problema gastrointestinal."}, 
                {t:"PESO", d:"Pode levar √† perda de peso."}, 
                {t:"SOCIAL", d:"Evita√ß√£o de comer em p√∫blico."}, 
                {t:"PROPOSITAL", d:"A√ß√£o n√£o √© involunt√°ria como v√¥mito."}, 
                {t:"SABOR", d:"N√£o sente gosto ruim."}, 
                {t:"MES", d:"Dura√ß√£o m√≠nima de 1 m√™s."}
            ],
            arfid: [
                {t:"RESTRITO", d:"Limita√ß√£o da quantidade."}, 
                {t:"EVITATIVO", d:"Recusa baseada em caracter√≠sticas."}, 
                {t:"TEXTURA", d:"Avers√£o sensorial."}, 
                {t:"COR", d:"Sele√ß√£o visual do alimento."}, 
                {t:"ODOR", d:"Rejei√ß√£o pelo cheiro."}, 
                {t:"ENGASGO", d:"Medo de consequ√™ncias aversivas."}, 
                {t:"NUTRICAO", d:"Defici√™ncia significativa."}, 
                {t:"PESO", d:"Perda ou falha no ganho."}, 
                {t:"SUPLEMENTO", d:"Depend√™ncia de nutri√ß√£o enteral."}, 
                {t:"INTERESSE", d:"Falta de vontade de comer."}
            ],
            anorexia: [
                {t:"RESTRICAO", d:"Baixa ingest√£o energ√©tica."}, 
                {t:"PESO", d:"Medo intenso de engordar."}, 
                {t:"DISTORCAO", d:"Perturba√ß√£o na imagem corporal."}, 
                {t:"JEJUM", d:"Ficar longos per√≠odos sem comer."}, 
                {t:"EXERCICIO", d:"Atividade f√≠sica excessiva."}, 
                {t:"CONTROLE", d:"Obsess√£o por dominar o corpo."}, 
                {t:"NEGACAO", d:"N√£o reconhece a gravidade."}, 
                {t:"CALORIA", d:"Contagem obsessiva."}, 
                {t:"GORDURA", d:"Sente-se gordo mesmo magro."}, 
                {t:"IMC", d:"√çndice de massa corporal baixo."}
            ],
            bulimia: [
                {t:"COMPULSAO", d:"Ingest√£o exagerada em pouco tempo."}, 
                {t:"DESCONTROLE", d:"Sensa√ß√£o de n√£o conseguir parar."}, 
                {t:"PURGACAO", d:"Comportamento compensat√≥rio."}, 
                {t:"VOMITO", d:"M√©todo comum de purga√ß√£o."}, 
                {t:"LAXANTE", d:"Uso indevido de medicamentos."}, 
                {t:"FORMA", d:"Influ√™ncia indevida na autoavalia√ß√£o."}, 
                {t:"PESO", d:"Foco excessivo na balan√ßa."}, 
                {t:"JEJUM", d:"Compensa√ß√£o sem purga√ß√£o."}, 
                {t:"SEGREDO", d:"Comer escondido."}, 
                {t:"CULPA", d:"Sentimento p√≥s-epis√≥dio."}
            ],
            compulsao_alim: [
                {t:"RAPIDO", d:"Comer mais depressa que o normal."}, 
                {t:"CHEIO", d:"Comer at√© sentir-se desconfort√°vel."}, 
                {t:"SEM_FOME", d:"Comer grandes quantidades sem apetite."}, 
                {t:"SOZINHO", d:"Comer isolado por vergonha."}, 
                {t:"NOJO", d:"Sentir-se desgostoso consigo."}, 
                {t:"DEPRIMIDO", d:"Sentimento p√≥s-epis√≥dio."}, 
                {t:"CULPA", d:"Remorso intenso."}, 
                {t:"DESCONTROLE", d:"Incapacidade de frear."}, 
                {t:"SEMANA", d:"Frequ√™ncia m√≠nima de 1x/semana."}, 
                {t:"ANGUSTIA", d:"Sofrimento marcante."}
            ],
            // 8. SONO
            insonia: [
                {t:"INICIAR", d:"Dificuldade ao deitar (lat√™ncia)."}, 
                {t:"MANTER", d:"Acordar no meio da noite."}, 
                {t:"PRECOCE", d:"Acordar muito cedo e n√£o voltar."}, 
                {t:"CANSACO", d:"Fadiga diurna."}, 
                {t:"ATENCAO", d:"Dificuldade de foco no dia."}, 
                {t:"HUMOR", d:"Irritabilidade."}, 
                {t:"PREOCUPA", d:"Pensar demais no sono."}, 
                {t:"NOITE", d:"Momento de ansiedade."}, 
                {t:"QUALIDADE", d:"Sono n√£o reparador."}, 
                {t:"TRES", d:"M√≠nimo de 3 noites por semana."}
            ],
            hipersonolencia: [
                {t:"EXCESSIVO", d:"Sono prolongado (+9h)."}, 
                {t:"COCHILO", d:"Dorme durante o dia."}, 
                {t:"RESTAURA", d:"Sono n√£o descansa."}, 
                {t:"ACORDAR", d:"Dificuldade de despertar completo."}, 
                {t:"CONFUSAO", d:"Embriaguez do sono."}, 
                {t:"AUTOMATICO", d:"Comportamentos sem mem√≥ria."}, 
                {t:"LENTIDAO", d:"Pensamento ou fala arrastada."}, 
                {t:"MEMORIA", d:"D√©ficit cognitivo leve."}, 
                {t:"DIURNO", d:"Ataques de sono de dia."}, 
                {t:"CRONICO", d:"Persiste por meses."}
            ],
            narcolepsia: [
                {t:"ATAQUE", d:"Sono irresist√≠vel."}, 
                {t:"CATAPLEXIA", d:"Perda s√∫bita de t√¥nus muscular."}, 
                {t:"RISO", d:"Gatilho comum da cataplexia."}, 
                {t:"REM", d:"Entrada r√°pida no sono."}, 
                {t:"ALUCINA", d:"Hipnag√≥gicas (ao dormir)."}, 
                {t:"PARALISIA", d:"Incapacidade de mover ao acordar."}, 
                {t:"HIPOCRETINA", d:"Defici√™ncia no l√≠quor."}, 
                {t:"SONOLENTO", d:"Estado constante."}, 
                {t:"BREVE", d:"Dura√ß√£o curta dos ataques."}, 
                {t:"RESTAURA", d:"Sente-se bem ap√≥s cochilo."}
            ],
            // 9. DISRUPTIVO
            tod: [
                {t:"RAIVA", d:"Humor irrit√°vel frequente."}, 
                {t:"DISCUTE", d:"Comportamento questionador."}, 
                {t:"DESAFIA", d:"Recusa cumprir regras."}, 
                {t:"INCOMODA", d:"Irrita os outros de prop√≥sito."}, 
                {t:"CULPA", d:"Responsabiliza outros pelos erros."}, 
                {t:"SUSCETIVEL", d:"Facilmente aborrecido."}, 
                {t:"VINGATIVO", d:"Rancoroso ou malvado."}, 
                {t:"AUTORIDADE", d:"Alvo do comportamento."}, 
                {t:"NEGATIVO", d:"Atitude hostil."}, 
                {t:"TEIMOSO", d:"Recusa persistente."}
            ],
            explosivo: [
                {t:"AGRESSAO", d:"Verbal ou f√≠sica."}, 
                {t:"PROPRIEDADE", d:"Danos a objetos."}, 
                {t:"ANIMAL", d:"Agress√£o a animais."}, 
                {t:"DESPROPORCIONAL", d:"Rea√ß√£o exagerada ao estressor."}, 
                {t:"IMPULSO", d:"N√£o premeditado."}, 
                {t:"RAIVA", d:"Emo√ß√£o dominante."}, 
                {t:"REMORSO", d:"Arrependimento posterior."}, 
                {t:"ATAQUE", d:"Surto de f√∫ria."}, 
                {t:"OBJETIVO", d:"N√£o √© para ganho tang√≠vel."}, 
                {t:"FREQUENTE", d:"Ocorre repetidamente."}
            ],
            conduta: [
                {t:"AGRESSAO", d:"A pessoas ou animais."}, 
                {t:"AMEACA", d:"Intimida outros."}, 
                {t:"BRIGA", d:"Inicia lutas corporais."}, 
                {t:"ARMA", d:"Uso de objeto perigoso."}, 
                {t:"CRUELDADE", d:"F√≠sica ou moral."}, 
                {t:"ROUBO", d:"Confronto com a v√≠tima."}, 
                {t:"SEXUAL", d:"Coer√ß√£o."}, 
                {t:"FOGO", d:"Destrui√ß√£o de propriedade."}, 
                {t:"MENTIRA", d:"Para obter vantagens."}, 
                {t:"FUGIR", d:"De casa ou da escola (gazeta)."}
            ],
            piromania: [
                {t:"FOGO", d:"Atear intencionalmente."}, 
                {t:"FASCINIO", d:"Atra√ß√£o por inc√™ndios."}, 
                {t:"CURIOSIDADE", d:"Interesse em equipamentos."}, 
                {t:"TENSAO", d:"Antes do ato."}, 
                {t:"PRAZER", d:"Durante ou ap√≥s o ato."}, 
                {t:"ALIVIO", d:"Redu√ß√£o da tens√£o."}, 
                {t:"INTENCAO", d:"A√ß√£o deliberada."}, 
                {t:"BOMBEIRO", d:"Interesse na profiss√£o."}, 
                {t:"CRIME", d:"N√£o √© por ganho financeiro."}, 
                {t:"RAIVA", d:"N√£o √© express√£o de vingan√ßa."}
            ],
            cleptomania: [
                {t:"FURTO", d:"Roubar objetos desnecess√°rios."}, 
                {t:"IMPULSO", d:"Incapacidade de resistir."}, 
                {t:"TENSAO", d:"Crescente antes do ato."}, 
                {t:"ALIVIO", d:"No momento do furto."}, 
                {t:"PRAZER", d:"Gratifica√ß√£o imediata."}, 
                {t:"CULPA", d:"Sentimento comum depois."}, 
                {t:"PESSOAL", d:"Uso pr√≥prio (n√£o venda)."}, 
                {t:"VALOR", d:"Objeto de pouco valor."}, 
                {t:"LOJA", d:"Local comum."}, 
                {t:"SOZINHO", d:"Geralmente n√£o tem c√∫mplices."}
            ],
            // 10. SUBSTANCIAS
            substancias: [
                {t:"MAIOR", d:"Consumo em quantidade superior."}, 
                {t:"TEMPO", d:"Gasto muito tempo obtendo/usando."}, 
                {t:"CRAVING", d:"Fissura ou desejo intenso."}, 
                {t:"FALHA", d:"N√£o cumpre obriga√ß√µes (trabalho)."}, 
                {t:"SOCIAL", d:"Problemas interpessoais."}, 
                {t:"LAZER", d:"Abandono de atividades."}, 
                {t:"PERIGO", d:"Uso em situa√ß√µes de risco."}, 
                {t:"FISICO", d:"Uso apesar de problemas de sa√∫de."}, 
                {t:"TOLERANCIA", d:"Precisa de mais dose."}, 
                {t:"ABSTINENCIA", d:"Sintomas na falta."}
            ],
            jogo: [
                {t:"APOSTAR", d:"Dinheiro crescente."}, 
                {t:"IRRITADO", d:"Ao tentar parar."}, 
                {t:"CONTROLE", d:"Esfor√ßos falhos p/ interromper."}, 
                {t:"PREOCUPA", d:"Pensamento fixo no jogo."}, 
                {t:"ANGUSTIA", d:"Joga quando se sente mal."}, 
                {t:"RECUPERAR", d:"Voltar para ganhar o perdido."}, 
                {t:"MENTIR", d:"Esconder o envolvimento."}, 
                {t:"RELACAO", d:"Perda de v√≠nculos."}, 
                {t:"EMPREGO", d:"Risco profissional."}, 
                {t:"DINHEIRO", d:"Conta com outros p/ d√≠vidas."}
            ],
            // 11. PERSONALIDADE
            paranoide: [
                {t:"SUSPEITA", d:"Desconfian√ßa sem base."}, 
                {t:"LEALDADE", d:"D√∫vida injustificada sobre amigos."}, 
                {t:"SEGREDO", d:"Reluta em confiar."}, 
                {t:"AMEACA", d:"V√™ perigo onde n√£o h√°."}, 
                {t:"RENCOR", d:"N√£o perdoa insultos."}, 
                {t:"ATAQUE", d:"Sente-se atacado facilmente."}, 
                {t:"TRAICAO", d:"Suspeita do parceiro."}, 
                {t:"HOSTIL", d:"Rea√ß√£o col√©rica."}, 
                {t:"RIGIDO", d:"Inflexibilidade mental."}, 
                {t:"CIUME", d:"Patol√≥gico."}
            ],
            esquizoide: [
                {t:"DISTANTE", d:"N√£o deseja rela√ß√µes intimas."}, 
                {t:"SOLITARIO", d:"Prefere atividades s√≥s."}, 
                {t:"SEXO", d:"Pouco interesse sexual."}, 
                {t:"PRAZER", d:"Gosta de poucas atividades."}, 
                {t:"AMIGO", d:"N√£o tem confidentes."}, 
                {t:"INDIFERENTE", d:"A elogios ou cr√≠ticas."}, 
                {t:"FRIO", d:"Frieza emocional."}, 
                {t:"AFETO", d:"Embotamento."}, 
                {t:"ISOLADO", d:"Estilo de vida."}, 
                {t:"APATICO", d:"Sem rea√ß√£o emocional."}
            ],
            esquizotipica: [
                {t:"REFERENCIA", d:"Ideias de que tudo √© para si."}, 
                {t:"CRENCA", d:"Esquisita ou pensamento m√°gico."}, 
                {t:"ILUSAO", d:"Percep√ß√µes corporais incomuns."}, 
                {t:"ESTRANHO", d:"Pensamento ou discurso vago."}, 
                {t:"PARANOIA", d:"Suspeita social."}, 
                {t:"AFETO", d:"Constrito ou inadequado."}, 
                {t:"APARENCIA", d:"Excentrica ou peculiar."}, 
                {t:"AMIGOS", d:"Falta de pr√≥ximos."}, 
                {t:"ANSIEDADE", d:"Social excessiva."}, 
                {t:"SUPERSTICAO", d:"Cren√ßa no sobrenatural."}
            ],
            antissocial: [
                {t:"LEI", d:"Incapacidade de ajustar-se."}, 
                {t:"MENTIRA", d:"Enganar para ganho pessoal."}, 
                {t:"IMPULSO", d:"Fracasso em planejar."}, 
                {t:"BRIGA", d:"Irritabilidade e agressividade."}, 
                {t:"SEGURANCA", d:"Descaso pela pr√≥pria ou alheia."}, 
                {t:"RESPONSAVEL", d:"Irresponsabilidade constante."}, 
                {t:"REMORSO", d:"Indiferen√ßa ao ferir."}, 
                {t:"DANO", d:"Justifica maus tratos."}, 
                {t:"ROUBO", d:"Hist√≥rico de delitos."}, 
                {t:"MANIPULA", d:"Charme superficial."}
            ],
            borderline: [
                {t:"ABANDONO", d:"Esfor√ßo fren√©tico para evit√°-lo."}, 
                {t:"INSTAVEL", d:"Relacionamentos intensos."}, 
                {t:"IDENTIDADE", d:"Autoimagem perturbada."}, 
                {t:"IMPULSO", d:"Gastos, sexo, abuso (2 √°reas)."}, 
                {t:"SUICIDIO", d:"Comportamento ou amea√ßas."}, 
                {t:"HUMOR", d:"Instabilidade afetiva acentuada."}, 
                {t:"VAZIO", d:"Sentimento cr√¥nico."}, 
                {t:"RAIVA", d:"Inadequada e intensa."}, 
                {t:"PARANOIA", d:"Idea√ß√£o transit√≥ria."}, 
                {t:"DISSOCIA", d:"Sintomas de desligamento."}
            ],
            histrionica: [
                {t:"CENTRO", d:"Desconforto se n√£o for o foco."}, 
                {t:"SEDUTOR", d:"Comportamento sexual inadequado."}, 
                {t:"EMOCAO", d:"Mudan√ßa r√°pida e superficial."}, 
                {t:"FISICO", d:"Usa apar√™ncia para chamar aten√ß√£o."}, 
                {t:"IMPRESSAO", d:"Discurso vago e dram√°tico."}, 
                {t:"TEATRAL", d:"Auto-dramatiza√ß√£o."}, 
                {t:"SUGESTAO", d:"Facilmente influenci√°vel."}, 
                {t:"INTIMO", d:"Considera rela√ß√µes mais do que s√£o."}, 
                {t:"ATENCAO", d:"Busca constante."}, 
                {t:"EXAGERO", d:"Express√£o emocional."}
            ],
            narcisista: [
                {t:"GRANDEZA", d:"Senso inflado de import√¢ncia."}, 
                {t:"FANTASIA", d:"Sucesso, poder ou beleza ilimitados."}, 
                {t:"ESPECIAL", d:"Cren√ßa de ser √∫nico."}, 
                {t:"ADMIRACAO", d:"Necessidade excessiva."}, 
                {t:"DIREITO", d:"Intitula√ß√£o (tratamento VIP)."}, 
                {t:"EXPLORA", d:"Usa os outros para fins pr√≥prios."}, 
                {t:"EMPATIA", d:"Falta de capacidade."}, 
                {t:"INVEJA", d:"Cr√™ que os outros o invejam."}, 
                {t:"ARROGANTE", d:"Comportamentos altivos."}, 
                {t:"SOBERBA", d:"Atitude superior."}
            ],
            evitativa: [
                {t:"CRITICA", d:"Evita atividades por medo."}, 
                {t:"ENVOLVER", d:"S√≥ se relaciona se tiver certeza."}, 
                {t:"INTIMO", d:"Reservado por medo de vergonha."}, 
                {t:"REJEICAO", d:"Preocupa√ß√£o excessiva."}, 
                {t:"INIBIDO", d:"Em situa√ß√µes novas."}, 
                {t:"INADEQUADO", d:"V√™-se como sem atrativos."}, 
                {t:"INFERIOR", d:"V√™-se menor que os outros."}, 
                {t:"RISCO", d:"Reluta em assumir novos desafios."}, 
                {t:"VERGONHA", d:"Medo de passar."}, 
                {t:"TIMIDO", d:"Extrema timidez."}
            ],
            dependente: [
                {t:"CONSELHO", d:"Precisa para decis√µes simples."}, 
                {t:"RESPONSAVEL", d:"Outros assumem a vida."}, 
                {t:"DISCORDAR", d:"Medo de perder apoio."}, 
                {t:"INICIAR", d:"Dificuldade em projetos."}, 
                {t:"APOIO", d:"Vai a extremos para obter."}, 
                {t:"SOZINHO", d:"Desconforto ao estar s√≥s."}, 
                {t:"RELACAO", d:"Busca urgente se uma termina."}, 
                {t:"MEDO", d:"De cuidar de si mesmo."}, 
                {t:"CUIDADO", d:"Necessidade excessiva."}, 
                {t:"SUBMISSO", d:"Comportamento aderente."}
            ],
            ob_compulsiva: [
                {t:"DETALHE", d:"Preocupa√ß√£o com listas e ordem."}, 
                {t:"PERFEITO", d:"Interfere na conclus√£o."}, 
                {t:"TRABALHO", d:"Dedica√ß√£o excessiva."}, 
                {t:"MORAL", d:"Consciencioso e escrupuloso."}, 
                {t:"VELHO", d:"Incapacidade de descartar."}, 
                {t:"DELEGAR", d:"Relut√¢ncia em trabalhar com outros."}, 
                {t:"AVAREZA", d:"Estilo de gastos miser√°vel."}, 
                {t:"RIGIDO", d:"Teimosia."}, 
                {t:"REGRA", d:"Apego excessivo."}, 
                {t:"CONTROLE", d:"Necessidade mental."}
            ]
        };

        const GRID_SIZE = 15;
        let gridArray = [];
        let placedWords = [];

        function generateGame() {
            const category = document.getElementById('levelSelect').value;
            let wordList = DB[category];
            
            // Seguran√ßa se n√£o houver lista
            if(!wordList) wordList = [{t:"ERRO", d:"Categoria vazia"}];

            const gridEl = document.getElementById('crosswordGrid');
            const listH = document.getElementById('listH');
            const listV = document.getElementById('listV');
            
            gridEl.innerHTML = ''; listH.innerHTML = ''; listV.innerHTML = '';
            gridEl.style.gridTemplateColumns = `repeat(${GRID_SIZE}, var(--cell-size))`;

            // Tentativa de gerar grid
            let success = false;
            for(let i=0; i<50; i++) {
                if(tryCreateGrid(wordList)) { success = true; break; }
            }

            if(!success) {
                // Fallback: tenta com menos palavras se falhar muito
                if(tryCreateGrid(wordList.slice(0, 8))) success = true;
            }

            renderGrid(gridEl);
            renderClues(listH, listV);
            renderAnswers();
        }

        function tryCreateGrid(words) {
            gridArray = Array(GRID_SIZE).fill(null).map(() => Array(GRID_SIZE).fill(null));
            placedWords = [];
            
            // Copia e ordena
            const sortedWords = [...words].sort((a,b) => b.t.length - a.t.length);
            
            // Primeira palavra (Meio)
            const first = sortedWords[0];
            const r = Math.floor(GRID_SIZE/2);
            const c = Math.floor((GRID_SIZE - first.t.length)/2);
            placeWord(first, r, c, 'H');

            // Restante
            for(let i=1; i<sortedWords.length; i++) {
                findSpot(sortedWords[i]);
            }

            // Crit√©rio de sucesso: pelo menos 60% das palavras ou 6 palavras
            return placedWords.length >= Math.min(sortedWords.length, 6);
        }

        function findSpot(word) {
            const text = word.t;
            const spots = [];

            for(let i=0; i<text.length; i++) {
                const char = text[i];
                for(let r=0; r<GRID_SIZE; r++) {
                    for(let c=0; c<GRID_SIZE; c++) {
                        if(gridArray[r][c] === char) {
                            // Tenta cruzar
                            if(canPlace(text, r-i, c, 'V')) spots.push({r:r-i, c:c, dir:'V'});
                            if(canPlace(text, r, c-i, 'H')) spots.push({r:r, c:c-i, dir:'H'});
                        }
                    }
                }
            }

            if(spots.length > 0) {
                const s = spots[Math.floor(Math.random() * spots.length)];
                placeWord(word, s.r, s.c, s.dir);
            }
        }

        function canPlace(word, row, col, dir) {
            if(row<0 || col<0) return false;
            if(dir === 'H' && col + word.length > GRID_SIZE) return false;
            if(dir === 'V' && row + word.length > GRID_SIZE) return false;

            for(let i=0; i<word.length; i++) {
                let r = row + (dir === 'V' ? i : 0);
                let c = col + (dir === 'H' ? i : 0);
                const current = gridArray[r][c];

                if(current !== null && current !== word[i]) return false;
                
                if(current === null) {
                    if(dir === 'H') {
                        if(r>0 && gridArray[r-1][c]!==null) return false;
                        if(r<GRID_SIZE-1 && gridArray[r+1][c]!==null) return false;
                        if(i===0 && c>0 && gridArray[r][c-1]!==null) return false;
                        if(i===word.length-1 && c<GRID_SIZE-1 && gridArray[r][c+1]!==null) return false;
                    } else {
                        if(c>0 && gridArray[r][c-1]!==null) return false;
                        if(c<GRID_SIZE-1 && gridArray[r][c+1]!==null) return false;
                        if(i===0 && r>0 && gridArray[r-1][c]!==null) return false;
                        if(i===word.length-1 && r<GRID_SIZE-1 && gridArray[r+1][c]!==null) return false;
                    }
                }
            }
            return true;
        }

        function placeWord(word, r, c, dir) {
            for(let i=0; i<word.t.length; i++) {
                let cr = r + (dir === 'V' ? i : 0);
                let cc = c + (dir === 'H' ? i : 0);
                gridArray[cr][cc] = word.t[i];
            }
            placedWords.push({...word, r, c, dir, num: placedWords.length+1});
        }

        function renderGrid(el) {
            const nums = {};
            placedWords.forEach(w => nums[`${w.r},${w.c}`] = w.num);

            for(let r=0; r<GRID_SIZE; r++) {
                for(let c=0; c<GRID_SIZE; c++) {
                    const char = gridArray[r][c];
                    const div = document.createElement('div');
                    
                    if(char) {
                        div.className = 'cell active';
                        div.innerHTML = `
                            <input type="text" maxlength="1" data-char="${char}" onkeyup="this.value=this.value.toUpperCase(); check()">
                            ${nums[`${r},${c}`] ? `<span class="cell-num">${nums[`${r},${c}`]}</span>` : ''}
                        `;
                    } else {
                        div.className = 'cell';
                    }
                    el.appendChild(div);
                }
            }
        }

        function renderClues(h, v) {
            // Ordena por n√∫mero
            placedWords.sort((a,b) => a.num - b.num);
            
            placedWords.forEach(w => {
                const item = `<div class="clue-item"><strong>${w.num}.</strong> ${w.d}</div>`;
                if(w.dir === 'H') h.innerHTML += item;
                else v.innerHTML += item;
            });
        }

        function check() {
            const inputs = document.querySelectorAll('.cell.active input');
            let all = true;
            inputs.forEach(i => {
                i.parentElement.classList.remove('correct', 'wrong');
                if(i.value) {
                    if(i.value === i.dataset.char) i.parentElement.classList.add('correct');
                    else { i.parentElement.classList.add('wrong'); all = false; }
                } else all = false;
            });
            
            if(all) checkGame(); // Chama a verifica√ß√£o final para soltar confete
        }

        function checkGame() {
            const inputs = document.querySelectorAll('.cell.active input');
            let perfect = true;
            inputs.forEach(i => {
                if(i.value !== i.dataset.char) perfect = false;
            });

            if(perfect) {
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                alert("Parab√©ns! Cruzadinha completa!");
            }
        }

        function renderAnswers() {
            const list = document.getElementById('answersList');
            list.innerHTML = placedWords.map(w => `<div class="answer-row"><strong>${w.num}. ${w.t}</strong>: ${w.d}</div>`).join('');
        }

        function showAnswers() {
            if(confirm("Deseja ver as respostas?")) {
                document.getElementById('modalAnswers').style.display='flex';
            }
        }

        // Init
        window.onload = generateGame;
    </script>
</body>
</html>
